/* Generated by Nim Compiler v2.3.1 */
#define NIM_INTBITS 64
#define NIM_EmulateOverflowChecks
#include "nimbase.h"
#include <string.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tyTuple__7q7q3E6Oj24ZNVJb9aonhAg tyTuple__7q7q3E6Oj24ZNVJb9aonhAg;
struct NimStrPayload {
	NI cap;
	NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
	NI len;
	NimStrPayload* p;
};
struct tyTuple__7q7q3E6Oj24ZNVJb9aonhAg {
	NimStringV2 Field0;
	NimStringV2 Field1;
	NimStringV2 Field2;
};
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nosrelativePath)(NimStringV2 path_p0, NimStringV2 base_p1, NIM_CHAR sep_p2);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nosgetCurrentDir)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___system_u2633)(NimStringV2* dest_p0, NimStringV2 src_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___system_u2621)(NimStringV2* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___system_u2624)(NimStringV2 dest_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, extractModulename__OOZdistZnimonyZsrcZgear2Zmodnames_u3)(NimStringV2 x_p0);
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1);
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(void, nossplitFile)(NimStringV2 path_p0, tyTuple__7q7q3E6Oj24ZNVJb9aonhAg* Result);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZos_u200)(tyTuple__7q7q3E6Oj24ZNVJb9aonhAg* dest_p0);
N_LIB_PRIVATE N_NIMCALL(NU32, uhash__OOZdistZnimonyZsrcZlibZtinyhashes_u29)(NimStringV2 s_p0);
N_NIMCALL(NimStringV2, rawNewString)(NI cap_p0);
static N_INLINE(void, nimAddCharV1)(NimStringV2* s_p0, NIM_CHAR c_p1);
N_LIB_PRIVATE N_NIMCALL(void, prepareAdd)(NimStringV2* s_p0, NI addLen_p1);
static const struct {
	NI cap;
	NIM_CHAR data[37];
} TM__FISBTf9cw1EmJFc7rt5P9ctA_2 = {(36 | NIM_STRLIT_FLAG), "0123456789abcdefghijklmnopqrstuvwxyz"};
static const NimStringV2 TM__FISBTf9cw1EmJFc7rt5P9ctA_3 = {36, ((NimStrPayload*) (&TM__FISBTf9cw1EmJFc7rt5P9ctA_2))};
extern NIM_BOOL nimInErrorMode__system_u4211;
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2) {
	void* T1_;
T1_ = ((void*) 0);
T1_ = memset(a_p0, v_p1, ((size_t) (size_p2)));
}

static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
result = ((&nimInErrorMode__system_u4211));
	return result;
}

static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1) {
	NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
nimSetMem__systemZmemory_u7(p_p0, ((int) 0), size_p1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
	BeforeRet_: ;
}

N_LIB_PRIVATE N_NIMCALL(NimStringV2, extractModulename__OOZdistZnimonyZsrcZgear2Zmodnames_u3)(NimStringV2 x_p0) {
	NimStringV2 result;
tyTuple__7q7q3E6Oj24ZNVJb9aonhAg colontmpD_;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result.len = 0;
result.p = NIM_NIL;
nimZeroMem(((void*) ((&colontmpD_))), sizeof(tyTuple__7q7q3E6Oj24ZNVJb9aonhAg));
nossplitFile(x_p0, ((&colontmpD_)));
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
result = colontmpD_.Field1;
eqwasMoved___system_u2621(((&colontmpD_.Field1)));
eqdestroy___pureZos_u200(((&colontmpD_)));
}
	BeforeRet_: ;
		return result;
}

static N_INLINE(void, nimAddCharV1)(NimStringV2* s_p0, NIM_CHAR c_p1) {
	prepareAdd(s_p0, ((NI) 1));
(*(*s_p0).p).data[(*s_p0).len] = c_p1;
(*s_p0).len += ((NI) 1);
(*(*s_p0).p).data[(*s_p0).len] = 0;
}

N_LIB_PRIVATE N_NIMCALL(NimStringV2, moduleSuffix__OOZdistZnimonyZsrcZgear2Zmodnames_u12)(NimStringV2 path_p0, NimStringV2* searchPaths_p1, NI searchPaths_p1Len_0) {
	NimStringV2 result;
NimStringV2 f_1;
NimStringV2 colontmpD_;
NimStringV2 m_1;
NU32 id_1;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result.len = 0;
result.p = NIM_NIL;
f_1.len = 0;
f_1.p = NIM_NIL;
colontmpD_.len = 0;
colontmpD_.p = NIM_NIL;
m_1.len = 0;
m_1.p = NIM_NIL;
colontmpD_ = nosgetCurrentDir();
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
f_1 = nosrelativePath(path_p0, colontmpD_, 47);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
{
	NimStringV2* s_1;
NI i_1;
s_1 = ((NimStringV2*) 0);
i_1 = ((NI) 0);
{
	while (1) {
	NimStringV2 candidate_1;
if ((!((i_1 < searchPaths_p1Len_0)))) {
	goto LA4;
}
candidate_1.len = 0;
candidate_1.p = NIM_NIL;
s_1 = ((&searchPaths_p1[i_1]));
candidate_1 = nosrelativePath(path_p0, (*s_1), 47);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA5_;
}
{
	if ((!((candidate_1.len < f_1.len)))) {
	goto LA8_;
}
eqsink___system_u2633(((&f_1)), candidate_1);
eqwasMoved___system_u2621(((&candidate_1)));
}
LA8_: ;
i_1 += ((NI) 1);
{
	LA5_: ;
}
{
	eqdestroy___system_u2624(candidate_1);
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
}
LA4: ;
}
}
m_1 = extractModulename__OOZdistZnimonyZsrcZgear2Zmodnames_u3(f_1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
id_1 = uhash__OOZdistZnimonyZsrcZlibZtinyhashes_u29(f_1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
result = rawNewString(((NI) 10));
{
	NI i_2;
NI colontmp_;
NI i_3;
i_2 = ((NI) 0);
colontmp_ = ((NI) 0);
colontmp_ = ((m_1.len <= ((NI) 3)) ? m_1.len : ((NI) 3));
i_3 = ((NI) 0);
{
	while (1) {
	if ((!((i_3 < colontmp_)))) {
	goto LA14;
}
i_2 = i_3;
nimAddCharV1(((&result)), (m_1).p->data[i_2]);
i_3 += ((NI) 1);
}
LA14: ;
}
}
{
	while (1) {
	if ((!((((NU32) ((NU32) 0)) < ((NU32) id_1))))) {
	goto LA16;
}
nimAddCharV1(((&result)), (TM__FISBTf9cw1EmJFc7rt5P9ctA_3).p->data[((NI) (((NU32) (((NU32) id_1) % ((NU32) ((NU32) 36))))))]);
id_1 = ((NU32) (((NU32) id_1) / ((NU32) ((NU32) 36))));
}
LA16: ;
}
{
	LA1_: ;
}
{
	eqdestroy___system_u2624(m_1);
eqdestroy___system_u2624(colontmpD_);
eqdestroy___system_u2624(f_1);
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
	BeforeRet_: ;
		return result;
}

