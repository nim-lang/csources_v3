/* Generated by Nim Compiler v2.3.1 */
#define NIM_INTBITS 64
#include "nimbase.h"
#include <string.h>
#include <sys/types.h>
#include <unistd.h>
#include <errno.h>
#include <fcntl.h>
#include <sys/wait.h>
#include <sys/event.h>
#include <sys/types.h>
                       #include <sys/event.h>
                       #include <sys/time.h>
#include <time.h>
#include <signal.h>
#include <stdlib.h>
#include <stdio.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
typedef struct tyTuple__XOVT24GHXwqiEj5GCsEGCA tyTuple__XOVT24GHXwqiEj5GCsEGCA;
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA;
typedef struct tyObject_StringTableObj__0P3m7501aN2ol2UKnK1guw tyObject_StringTableObj__0P3m7501aN2ol2UKnK1guw;
typedef struct tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw;
typedef struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ tySequence__sM4lkSb7zS6F7OVMvW9cffQ;
typedef struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content;
typedef struct tyObject_RefHeader__FGKZ49c8t8ymzpUyHZMX1yA tyObject_RefHeader__FGKZ49c8t8ymzpUyHZMX1yA;
typedef struct TNimTypeV2 TNimTypeV2;
typedef struct RootObj RootObj;
typedef struct tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ;
typedef struct tyObject_GcEnv__dJ89cXQHRWND9bolxO2PEClQ tyObject_GcEnv__dJ89cXQHRWND9bolxO2PEClQ;
typedef struct tyObject_CellSeq__sHjE7m89arkx88LiPe5RUjw tyObject_CellSeq__sHjE7m89arkx88LiPe5RUjw;
typedef struct tyTuple__N4J9cV4JZGem3ljqqj5rT0Q tyTuple__N4J9cV4JZGem3ljqqj5rT0Q;
typedef struct tyObject_CellSeq__MvX0tzeihI9bG7iA3lGffbw tyObject_CellSeq__MvX0tzeihI9bG7iA3lGffbw;
typedef struct tyTuple__6P9cCXNN4FkDSPpqCTMFpmA tyTuple__6P9cCXNN4FkDSPpqCTMFpmA;
typedef struct tyTuple__UV3llMMYFckfui8YMBuUZA tyTuple__UV3llMMYFckfui8YMBuUZA;
typedef struct tySequence__xv3aaFd3JCw8NbmALHiezQ tySequence__xv3aaFd3JCw8NbmALHiezQ;
typedef struct tySequence__xv3aaFd3JCw8NbmALHiezQ_Content tySequence__xv3aaFd3JCw8NbmALHiezQ_Content;
typedef struct tyTuple__sPaDkVPSC0MkcoXCxPH9ccA tyTuple__sPaDkVPSC0MkcoXCxPH9ccA;
typedef struct tyObject_FileStreamObj__LbEzkl9aTALZDJEfP9c09a3QQ tyObject_FileStreamObj__LbEzkl9aTALZDJEfP9c09a3QQ;
typedef struct tyObject_HSlice__ITk4fx5j9b0q1zogcnnFSGg tyObject_HSlice__ITk4fx5j9b0q1zogcnnFSGg;
typedef struct tySequence__f1LaZFhRcYuVoOYPotMmhg tySequence__f1LaZFhRcYuVoOYPotMmhg;
typedef struct tySequence__f1LaZFhRcYuVoOYPotMmhg_Content tySequence__f1LaZFhRcYuVoOYPotMmhg_Content;
typedef struct tySequence__qwqHTkRvwhrRyENtudHQ7g tySequence__qwqHTkRvwhrRyENtudHQ7g;
typedef struct tySequence__qwqHTkRvwhrRyENtudHQ7g_Content tySequence__qwqHTkRvwhrRyENtudHQ7g_Content;
struct NimStrPayload {
	NI cap;
	NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
	NI len;
	NimStrPayload* p;
};
struct tyTuple__XOVT24GHXwqiEj5GCsEGCA {
	NimStringV2 Field0;
	NI Field1;
};
typedef NU8 tySet_tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw;
typedef int tyArray__NO6udWOtIkldhscb9cksBow[2];
struct tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw {
	NimStringV2 sysCommand;
	NCSTRING* sysArgs;
	NCSTRING* sysEnv;
	NCSTRING workingDir;
	tyArray__NO6udWOtIkldhscb9cksBow pStdin;
	tyArray__NO6udWOtIkldhscb9cksBow pStdout;
	tyArray__NO6udWOtIkldhscb9cksBow pStderr;
	tyArray__NO6udWOtIkldhscb9cksBow pErrorPipe;
	tySet_tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw options;
};
struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ {
	NI len;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content* p;
};
struct tyObject_RefHeader__FGKZ49c8t8ymzpUyHZMX1yA {
	NI rc;
	NI rootIdx;
};
struct TNimTypeV2 {
	void* destructor;
	NI size;
	NI16 align;
	NI16 depth;
	NU32* display;
	void* traceImpl;
	void* typeInfoV1;
	NI flags;
	void* vTable[SEQ_DECL_SIZE];
};
struct RootObj {
	TNimTypeV2* m_type;
};
struct tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA {
	RootObj Sup;
	int inHandle;
	int outHandle;
	int errHandle;
	pid_t id;
	tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* inStream;
	tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* outStream;
	tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* errStream;
	int exitStatus;
	NIM_BOOL exitFlag;
	tySet_tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw options;
};
struct tyObject_CellSeq__sHjE7m89arkx88LiPe5RUjw {
	NI len;
	NI cap;
	tyTuple__N4J9cV4JZGem3ljqqj5rT0Q* d;
};
struct tyObject_CellSeq__MvX0tzeihI9bG7iA3lGffbw {
	NI len;
	NI cap;
	tyTuple__6P9cCXNN4FkDSPpqCTMFpmA* d;
};
struct tyObject_GcEnv__dJ89cXQHRWND9bolxO2PEClQ {
	tyObject_CellSeq__sHjE7m89arkx88LiPe5RUjw traceStack;
	tyObject_CellSeq__MvX0tzeihI9bG7iA3lGffbw toFree;
	NI freed;
	NI touched;
	NI edges;
	NI rcSum;
	NIM_BOOL keepThreshold;
};
struct tyTuple__N4J9cV4JZGem3ljqqj5rT0Q {
	void** Field0;
	TNimTypeV2* Field1;
};
typedef NU8 tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw;
typedef NCSTRING tyUncheckedArray__nvS6J9clHMUMHfoZd8Ad2zg[1];
struct tyTuple__UV3llMMYFckfui8YMBuUZA {
	NimStringV2 Field0;
	NimStringV2 Field1;
};
struct tySequence__xv3aaFd3JCw8NbmALHiezQ {
	NI len;
	tySequence__xv3aaFd3JCw8NbmALHiezQ_Content* p;
};
typedef NU8 tyEnum_StringTableMode__VhxyrpNCB2zjKG9bRruBslQ;
struct tyObject_StringTableObj__0P3m7501aN2ol2UKnK1guw {
	RootObj Sup;
	NI counter;
	tySequence__xv3aaFd3JCw8NbmALHiezQ data;
	tyEnum_StringTableMode__VhxyrpNCB2zjKG9bRruBslQ mode;
};
struct tyTuple__sPaDkVPSC0MkcoXCxPH9ccA {
	NimStringV2 Field0;
	NimStringV2 Field1;
	NIM_BOOL Field2;
};
typedef NimStringV2 tyArray__24KAM9afIUgUaqBaEBB6r9bg[3];
typedef N_NIMCALL_PTR(void, tyProc__iSHIdH3YKPbVylzN9a9agYWQ)(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* s_p0);
typedef N_NIMCALL_PTR(NIM_BOOL, tyProc__9aEu9cO7LzfVYXYlXhtzI5dg)(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* s_p0);
typedef N_NIMCALL_PTR(void, tyProc__FMBLKPr9bQhzrIFrj9ba7GJw)(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* s_p0, NI pos_p1);
typedef N_NIMCALL_PTR(NI, tyProc__9cBK2FijRTJPg8u4i28iiWA)(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* s_p0);
typedef N_NIMCALL_PTR(NI, tyProc__TFb6e4qvpv253z7vu0cxTw)(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* s_p0, NimStringV2* buffer_p1, tyObject_HSlice__ITk4fx5j9b0q1zogcnnFSGg slice_p2);
typedef N_NIMCALL_PTR(NIM_BOOL, tyProc__a05gzS0TpD9aw2b2ZGU4BbA)(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* s_p0, NimStringV2* line_p1);
typedef N_NIMCALL_PTR(NI, tyProc__K9b9cKf6zvT73YqlJOkMvmyA)(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* s_p0, void* buffer_p1, NI bufLen_p2);
typedef N_NIMCALL_PTR(void, tyProc__9aEXGns3hCn8ETlSMybXdjg)(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* s_p0, void* buffer_p1, NI bufLen_p2);
struct tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ {
	RootObj Sup;
	tyProc__iSHIdH3YKPbVylzN9a9agYWQ closeImpl;
	tyProc__9aEu9cO7LzfVYXYlXhtzI5dg atEndImpl;
	tyProc__FMBLKPr9bQhzrIFrj9ba7GJw setPositionImpl;
	tyProc__9cBK2FijRTJPg8u4i28iiWA getPositionImpl;
	tyProc__TFb6e4qvpv253z7vu0cxTw readDataStrImpl;
	tyProc__a05gzS0TpD9aw2b2ZGU4BbA readLineImpl;
	tyProc__K9b9cKf6zvT73YqlJOkMvmyA readDataImpl;
	tyProc__K9b9cKf6zvT73YqlJOkMvmyA peekDataImpl;
	tyProc__9aEXGns3hCn8ETlSMybXdjg writeDataImpl;
	tyProc__iSHIdH3YKPbVylzN9a9agYWQ flushImpl;
};
struct tyObject_FileStreamObj__LbEzkl9aTALZDJEfP9c09a3QQ {
	tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ Sup;
	FILE* f;
};
typedef NU8 tyEnum_FileMode__m6ZEz9b9czV5YJ5lg4IK9bc4Q;
typedef NimStringV2 tyArray__8ZvwQIddfpj2THRVPsFzIQ[1];
typedef struct {
N_NIMCALL_PTR(void, ClP_0)(NI idx_p0, void* ClE_0);
	void* ClE_0;
} tyProc__SqRJqa5aOiKB4EuKlKh9asA;
typedef struct {
N_NIMCALL_PTR(void, ClP_0)(NI idx_p0, tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* p_p1, void* ClE_0);
	void* ClE_0;
} tyProc__MlXIWKY6cr9aOrsoMnbx7jA;
struct tySequence__f1LaZFhRcYuVoOYPotMmhg {
	NI len;
	tySequence__f1LaZFhRcYuVoOYPotMmhg_Content* p;
};
struct tySequence__qwqHTkRvwhrRyENtudHQ7g {
	NI len;
	tySequence__qwqHTkRvwhrRyENtudHQ7g_Content* p;
};
typedef N_CLOSURE_PTR(void, TM__HZdw8BhppcTQo8DIK46LSg_34)(NI idx_p0);
typedef N_CLOSURE_PTR(void, TM__HZdw8BhppcTQo8DIK46LSg_39)(NI idx_p0, tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* p_p1);
typedef N_CLOSURE_PTR(void, TM__HZdw8BhppcTQo8DIK46LSg_40)(NI idx_p0);
typedef N_CLOSURE_PTR(void, TM__HZdw8BhppcTQo8DIK46LSg_42)(NI idx_p0);
typedef N_CLOSURE_PTR(void, TM__HZdw8BhppcTQo8DIK46LSg_44)(NI idx_p0, tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* p_p1);
struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content {
	NI cap;
	NimStringV2 data[SEQ_DECL_SIZE];
};
struct tySequence__xv3aaFd3JCw8NbmALHiezQ_Content {
	NI cap;
	tyTuple__sPaDkVPSC0MkcoXCxPH9ccA data[SEQ_DECL_SIZE];
};
struct tyObject_HSlice__ITk4fx5j9b0q1zogcnnFSGg {
	NI a;
	NI b;
};
struct tySequence__f1LaZFhRcYuVoOYPotMmhg_Content {
	NI cap;
	tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* data[SEQ_DECL_SIZE];
};
struct tySequence__qwqHTkRvwhrRyENtudHQ7g_Content {
	NI cap;
	NI data[SEQ_DECL_SIZE];
};
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___system_u2624)(NimStringV2 dest_p0);
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1);
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZosproc_u216)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* dest_p0);
static N_INLINE(NIM_BOOL, nimDecRefIsLastCyclicDyn)(void* p_p0);
static N_INLINE(NI, minuspercent___system_u805)(NI x_p0, NI y_p1);
N_LIB_PRIVATE N_NOINLINE(void, rememberCycle__system_u3397)(NIM_BOOL isDestroyAction_p0, tyObject_RefHeader__FGKZ49c8t8ymzpUyHZMX1yA* s_p1, TNimTypeV2* desc_p2);
N_LIB_PRIVATE N_NIMCALL(void, nimDestroyAndDispose)(void* p_p0);
N_LIB_PRIVATE N_NIMCALL(void*, nimNewObj)(NI size_p0, NI alignment_p1);
N_LIB_PRIVATE N_NIMCALL(void, rttiDestroy__pureZosproc_u1958)(void* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZosproc_u236)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqtrace___pureZosproc_u248)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* dest_p0, void* env_p1);
static N_INLINE(void, nimTraceRefDyn)(void* q_p0, void* env_p1);
static N_INLINE(void, add__system_u2937)(tyObject_CellSeq__sHjE7m89arkx88LiPe5RUjw* s_p0, void** c_p1, TNimTypeV2* t_p2);
N_LIB_PRIVATE N_NIMCALL(void, resize__system_u2945)(tyObject_CellSeq__sHjE7m89arkx88LiPe5RUjw* s_p0);
static N_INLINE(NI, pluspercent___system_u785)(NI x_p0, NI y_p1);
N_LIB_PRIVATE N_NOINLINE(void, raiseOSError__stdZoserrors_u119)(NI32 errorCode_p0, NimStringV2 additionalInfo_p1);
N_LIB_PRIVATE N_NIMCALL(NI32, osLastError__stdZoserrors_u122)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___system_u2633)(NimStringV2* dest_p0, NimStringV2 src_p1);
N_LIB_PRIVATE N_NIMCALL(void*, newSeqPayload)(NI cap_p0, NI elemSize_p1, NI elemAlign_p2);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, eqdup___system_u2630)(NimStringV2 src_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___system_u2627)(NimStringV2* dest_p0, NimStringV2 src_p1);
N_LIB_PRIVATE N_NIMCALL(void, add__stdZenumutils_u71)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ* x_p0, NimStringV2 y_p1);
N_LIB_PRIVATE N_NIMCALL(NCSTRING*, allocCStringArray__system_u3805)(NimStringV2* a_p0, NI a_p0Len_0);
N_LIB_PRIVATE N_NIMCALL(NCSTRING*, envToCStringArray__pureZosproc_u733)(void);
static N_INLINE(NIM_BOOL, eqeq___system_u8282)(NCSTRING x_p0, NCSTRING y_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, cstrToNimstr)(NCSTRING str_p0);
static N_INLINE(NI, find__pureZparseutils_u628)(NimStringV2 a_p0, NIM_CHAR item_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___stdZprivateZospaths2_u315)(tyTuple__UV3llMMYFckfui8YMBuUZA* dest_p0, tyTuple__UV3llMMYFckfui8YMBuUZA* src_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, substr__system_u8338)(NimStringV2 s_p0, NI first_p1, NI last_p2);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, substr__system_u8351)(NimStringV2 s_p0, NI first_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___system_u2621)(NimStringV2* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___stdZprivateZospaths2_u306)(tyTuple__UV3llMMYFckfui8YMBuUZA* dest_p0);
N_LIB_PRIVATE N_NOCONV(void*, alloc0Impl__system_u1742)(NI size_p0);
static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1);
static N_INLINE(void, copyMem__system_u1724)(void* dest_p0, void* source_p1, NI size_p2);
static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, rawNewString)(NI space_p0);
N_LIB_PRIVATE N_NOCONV(void*, allocImpl__system_u1740)(NI size_p0);
N_LIB_PRIVATE N_NIMCALL(NCSTRING*, envToCStringArray__pureZosproc_u721)(tyObject_StringTableObj__0P3m7501aN2ol2UKnK1guw* t_p0);
N_LIB_PRIVATE N_NIMCALL(NI, nstlen)(tyObject_StringTableObj__0P3m7501aN2ol2UKnK1guw* t_p0);
static N_INLINE(NCSTRING, nimToCStringConv)(NimStringV2 s_p0);
N_LIB_PRIVATE N_NIMCALL(pid_t, startProcessAuxFork__pureZosproc_u763)(tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw* data_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___pureZosproc_u873)(tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw* dest_p0, tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw* src_p1);
N_LIB_PRIVATE N_CDECL(void, startProcessAfterFork__pureZosproc_u765)(tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw* data_p0);
N_LIB_PRIVATE N_NIMCALL(void, startProcessFail__pureZosproc_u946)(tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw* data_p0, int error_p1);
static N_INLINE(NI, nimCStrLen)(NCSTRING a_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZosproc_u870)(tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw* dest_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nsuJoinSep)(NimStringV2* a_p0, NI a_p0Len_0, NimStringV2 sep_p1);
N_LIB_PRIVATE N_NIMCALL(void, echoBinSafe)(NimStringV2* args_p0, NI args_p0Len_0);
N_LIB_PRIVATE N_NIMCALL(void, deallocCStringArray__system_u3859)(NCSTRING* a_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___system_u3714)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___pureZstreams_u684)(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ** dest_p0, tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* src_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_FileStreamObj__LbEzkl9aTALZDJEfP9c09a3QQ*, createStream__pureZosproc_u1060)(int* handle_p0, tyEnum_FileMode__m6ZEz9b9czV5YJ5lg4IK9bc4Q fileMode_p1);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, open__stdZsyncio_u475)(FILE** f_p0, int filehandle_p1, tyEnum_FileMode__m6ZEz9b9czV5YJ5lg4IK9bc4Q mode_p2);
N_LIB_PRIVATE N_NIMCALL(tyObject_FileStreamObj__LbEzkl9aTALZDJEfP9c09a3QQ*, newFileStream__pureZstreams_u1072)(FILE* f_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZstreams_u980)(tyObject_FileStreamObj__LbEzkl9aTALZDJEfP9c09a3QQ* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___pureZstreams_u676)(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ** dest_p0, tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* src_p1, NIM_BOOL cyclic_p2);
N_LIB_PRIVATE N_NIMCALL(int, exitStatusLikeShell__pureZos_u163)(int status_p0);
static N_INLINE(NI, percentpercent___system_u865)(NI x_p0, NI y_p1);
N_LIB_PRIVATE N_NIMCALL(void, close__pureZstreams_u58)(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* s_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA*, nospstartProcess)(NimStringV2 command_p0, NimStringV2 workingDir_p1, NimStringV2* args_p2, NI args_p2Len_0, tyObject_StringTableObj__0P3m7501aN2ol2UKnK1guw* env_p3, tySet_tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw options_p4);
N_LIB_PRIVATE N_NIMCALL(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ*, nospoutputStream)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* p_p0);
N_LIB_PRIVATE N_NIMCALL(void, write__pureZstreams_u184)(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* s_p0, NimStringV2 x_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ*, nospinputStream)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* p_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZstreams_u673)(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* dest_p0);
N_NIMCALL(NimStringV2, rawNewString)(NI cap_p0);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, readLine__pureZstreams_u555)(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* s_p0, NimStringV2* line_p1);
N_LIB_PRIVATE N_NIMCALL(void, prepareAdd)(NimStringV2* s_p0, NI addLen_p1);
N_LIB_PRIVATE N_NIMCALL(NI, nosppeekExitCode)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* p_p0);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, isExitStatus__pureZosproc_u718)(int status_p0);
N_LIB_PRIVATE N_NIMCALL(void, nospclose)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* p_p0);
N_LIB_PRIVATE N_NIMCALL(NI, ncpicountProcessors)(void);
N_LIB_PRIVATE N_NIMCALL(tySequence__f1LaZFhRcYuVoOYPotMmhg, newSeq__pureZosproc_u133)(NI len_p0);
N_LIB_PRIVATE N_NIMCALL(tySequence__qwqHTkRvwhrRyENtudHQ7g, newSeq__pureZosproc_u366)(NI len_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___pureZosproc_u227)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA** dest_p0, tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* src_p1);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, nosprunning)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* p_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZosproc_u450)(tySequence__qwqHTkRvwhrRyENtudHQ7g dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZosproc_u307)(tySequence__f1LaZFhRcYuVoOYPotMmhg dest_p0);
N_LIB_PRIVATE N_NIMCALL(NI, nospwaitForExit)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* p_p0, NI timeout_p1);
N_LIB_PRIVATE TNimTypeV2 NTIv2__nmbwhtRW8vPb4MWVUOiwqA_;
static const struct {
	NI cap;
	NIM_CHAR data[1];
} TM__HZdw8BhppcTQo8DIK46LSg_3 = {(0 | NIM_STRLIT_FLAG), ""};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_4 = {0, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_3))};
static const struct {
	NI cap;
	NIM_CHAR data[8];
} TM__HZdw8BhppcTQo8DIK46LSg_5 = {(7 | NIM_STRLIT_FLAG), "/bin/sh"};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_6 = {7, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_5))};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_7 = {7, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_5))};
static const struct {
	NI cap;
	NIM_CHAR data[3];
} TM__HZdw8BhppcTQo8DIK46LSg_8 = {(2 | NIM_STRLIT_FLAG), "-c"};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_9 = {2, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_8))};
static const struct {
	NI cap;
	NIM_CHAR data[2];
} TM__HZdw8BhppcTQo8DIK46LSg_10 = {(1 | NIM_STRLIT_FLAG), "="};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_11 = {1, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_10))};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_12 = {1, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_10))};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_13 = {0, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_3))};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_14 = {0, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_3))};
static const struct {
	NI cap;
	NIM_CHAR data[26];
} TM__HZdw8BhppcTQo8DIK46LSg_15 = {(25 | NIM_STRLIT_FLAG), "Could not find command: \'"};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_16 = {25, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_15))};
static const struct {
	NI cap;
	NIM_CHAR data[14];
} TM__HZdw8BhppcTQo8DIK46LSg_17 = {(13 | NIM_STRLIT_FLAG), "\'. OS error: "};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_18 = {13, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_17))};
static const struct {
	NI cap;
	NIM_CHAR data[2];
} TM__HZdw8BhppcTQo8DIK46LSg_19 = {(1 | NIM_STRLIT_FLAG), " "};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_20 = {1, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_19))};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_21 = {1, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_19))};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_22 = {0, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_3))};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_23 = {0, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_3))};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_24 = {0, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_3))};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_25 = {0, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_3))};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_26 = {0, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_3))};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_27 = {0, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_3))};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_28 = {0, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_3))};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_29 = {0, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_3))};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_30 = {0, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_3))};
static const struct {
	NI cap;
	NIM_CHAR data[2];
} TM__HZdw8BhppcTQo8DIK46LSg_31 = {(1 | NIM_STRLIT_FLAG), "\012"};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_32 = {1, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_31))};
static NIM_CONST tyProc__SqRJqa5aOiKB4EuKlKh9asA TM__HZdw8BhppcTQo8DIK46LSg_33 = {NIM_NIL, NIM_NIL};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_35 = {0, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_3))};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_36 = {0, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_3))};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_37 = {0, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_3))};
static NIM_CONST tyProc__MlXIWKY6cr9aOrsoMnbx7jA TM__HZdw8BhppcTQo8DIK46LSg_38 = {NIM_NIL, NIM_NIL};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_41 = {0, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_3))};
static const NimStringV2 TM__HZdw8BhppcTQo8DIK46LSg_43 = {0, ((NimStrPayload*) (&TM__HZdw8BhppcTQo8DIK46LSg_3))};
extern NCSTRING* environ;
extern NIM_BOOL nimInErrorMode__system_u4209;
static NIM_CONST NU32 TM__HZdw8BhppcTQo8DIK46LSg_2[2] = {3701606400, 1727038976};
N_LIB_PRIVATE TNimTypeV2 NTIv2__nmbwhtRW8vPb4MWVUOiwqA_ = {.destructor = ((void*) rttiDestroy__pureZosproc_u1958), .size = sizeof(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA), .align = ((NI16) NIM_ALIGNOF(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA)), .depth = 1, .display = TM__HZdw8BhppcTQo8DIK46LSg_2, .traceImpl = ((void*) eqtrace___pureZosproc_u248), .flags = 0};
extern NCSTRING* environ;
N_LIB_PRIVATE N_NIMCALL(void, eqsink___pureZosproc_u1940)(tyTuple__XOVT24GHXwqiEj5GCsEGCA* dest_p0, tyTuple__XOVT24GHXwqiEj5GCsEGCA src_p1) {
	if (((*dest_p0).Field0.p != src_p1.Field0.p)) {
	eqdestroy___system_u2624((*dest_p0).Field0);
}
(*dest_p0).Field0.len = src_p1.Field0.len;
(*dest_p0).Field0.p = src_p1.Field0.p;
(*dest_p0).Field1 = src_p1.Field1;
}

static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2) {
	void* T1_;
T1_ = ((void*) 0);
T1_ = memset(a_p0, v_p1, ((size_t) (size_p2)));
}

static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
result = ((&nimInErrorMode__system_u4209));
	return result;
}

static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1) {
	NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
nimSetMem__systemZmemory_u7(p_p0, ((int) 0), size_p1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
	BeforeRet_: ;
}

static N_INLINE(NI, minuspercent___system_u805)(NI x_p0, NI y_p1) {
	NI result;
result = ((NI) (((NU) (((NU64) ((NU) (x_p0))) - ((NU64) ((NU) (y_p1)))))));
	return result;
}

static N_INLINE(NIM_BOOL, nimDecRefIsLastCyclicDyn)(void* p_p0) {
	NIM_BOOL result;
result = NIM_FALSE;
{
	tyObject_RefHeader__FGKZ49c8t8ymzpUyHZMX1yA* cell_1;
NI T5_;
if ((!((!((p_p0 == NIM_NIL)))))) {
	goto LA3_;
}
T5_ = ((NI) 0);
T5_ = minuspercent___system_u805(((NI) ((ptrdiff_t) (p_p0))), ((NI) 16));
cell_1 = ((tyObject_RefHeader__FGKZ49c8t8ymzpUyHZMX1yA*) (T5_));
{
	if ((!((((NI) ((*cell_1).rc & ((NI) -16))) == ((NI) 0))))) {
	goto LA8_;
}
result = NIM_TRUE;
}
goto LA6_;
LA8_: ;
{
	(*cell_1).rc = minuspercent___system_u805((*cell_1).rc, ((NI) 16));
}
LA6_: ;
rememberCycle__system_u3397(result, cell_1, (*((TNimTypeV2**) (p_p0))));
}
LA3_: ;
	return result;
}

N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZosproc_u216)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* dest_p0) {
	{
	NIM_BOOL T3_;
T3_ = ((NIM_BOOL) 0);
T3_ = nimDecRefIsLastCyclicDyn(dest_p0);
if ((!(T3_))) {
	goto LA4_;
}
nimDestroyAndDispose(dest_p0);
}
LA4_: ;
}

N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZosproc_u236)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* dest_p0) {
	{
	NIM_BOOL T3_;
T3_ = ((NIM_BOOL) 0);
T3_ = nimDecRefIsLastCyclicDyn((*dest_p0).errStream);
if ((!(T3_))) {
	goto LA4_;
}
nimDestroyAndDispose((*dest_p0).errStream);
}
LA4_: ;
{
	NIM_BOOL T8_;
T8_ = ((NIM_BOOL) 0);
T8_ = nimDecRefIsLastCyclicDyn((*dest_p0).outStream);
if ((!(T8_))) {
	goto LA9_;
}
nimDestroyAndDispose((*dest_p0).outStream);
}
LA9_: ;
{
	NIM_BOOL T13_;
T13_ = ((NIM_BOOL) 0);
T13_ = nimDecRefIsLastCyclicDyn((*dest_p0).inStream);
if ((!(T13_))) {
	goto LA14_;
}
nimDestroyAndDispose((*dest_p0).inStream);
}
LA14_: ;
}

N_LIB_PRIVATE N_NIMCALL(void, rttiDestroy__pureZosproc_u1958)(void* dest_p0) {
	eqdestroy___pureZosproc_u236(((&(*((tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA*) (dest_p0))))));
}

static N_INLINE(NI, pluspercent___system_u785)(NI x_p0, NI y_p1) {
	NI result;
result = ((NI) (((NU) (((NU64) ((NU) (x_p0))) + ((NU64) ((NU) (y_p1)))))));
	return result;
}

static N_INLINE(void, add__system_u2937)(tyObject_CellSeq__sHjE7m89arkx88LiPe5RUjw* s_p0, void** c_p1, TNimTypeV2* t_p2) {
	void** colontmp_;
TNimTypeV2* colontmp__2;
{
	if ((!(((*s_p0).cap <= (*s_p0).len)))) {
	goto LA3_;
}
resize__system_u2945(s_p0);
}
LA3_: ;
colontmp_ = c_p1;
colontmp__2 = t_p2;
(*s_p0).d[(*s_p0).len].Field0 = colontmp_;
(*s_p0).d[(*s_p0).len].Field1 = colontmp__2;
(*s_p0).len = pluspercent___system_u785((*s_p0).len, ((NI) 1));
}

static N_INLINE(void, nimTraceRefDyn)(void* q_p0, void* env_p1) {
	void** p_1;
p_1 = ((void**) (q_p0));
{
	tyObject_GcEnv__dJ89cXQHRWND9bolxO2PEClQ* j_1;
if ((!((!(((*p_1) == NIM_NIL)))))) {
	goto LA3_;
}
j_1 = ((tyObject_GcEnv__dJ89cXQHRWND9bolxO2PEClQ*) (env_p1));
add__system_u2937(((&(*j_1).traceStack)), p_1, (*((TNimTypeV2**) ((*p_1)))));
}
LA3_: ;
}

N_LIB_PRIVATE N_NIMCALL(void, eqtrace___pureZosproc_u248)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* dest_p0, void* env_p1) {
	nimTraceRefDyn((&(*dest_p0).inStream), env_p1);
nimTraceRefDyn((&(*dest_p0).outStream), env_p1);
nimTraceRefDyn((&(*dest_p0).errStream), env_p1);
}

static N_INLINE(NIM_BOOL, eqeq___system_u8282)(NCSTRING x_p0, NCSTRING y_p1) {
	NIM_BOOL result;
{
	if ((!((((void*) (x_p0)) == ((void*) (y_p1)))))) {
	goto LA3_;
}
result = NIM_TRUE;
}
goto LA1_;
LA3_: ;
{
	NIM_BOOL T6_;
T6_ = ((NIM_BOOL) 0);
T6_ = (((void*) (x_p0)) == NIM_NIL);
if (T6_) {
	goto LA7_;
}
T6_ = (((void*) (y_p1)) == NIM_NIL);
LA7_: ;
if ((!(T6_))) {
	goto LA8_;
}
result = NIM_FALSE;
}
goto LA1_;
LA8_: ;
{
	int T11_;
T11_ = ((int) 0);
T11_ = strcmp(x_p0, y_p1);
result = (T11_ == ((NI32) 0));
}
LA1_: ;
	return result;
}

static N_INLINE(NI, find__pureZparseutils_u628)(NimStringV2 a_p0, NIM_CHAR item_p1) {
	NI result;
{
		result = ((NI) 0);
{
	NIM_CHAR i_1;
NI i_2;
NI L_1;
i_1 = ((NIM_CHAR) 0);
i_2 = ((NI) 0);
L_1 = a_p0.len;
{
	while (1) {
	if ((!((i_2 < L_1)))) {
	goto LA3;
}
i_1 = (a_p0).p->data[i_2];
{
	if ((!((((NU8) i_1) == ((NU8) item_p1))))) {
	goto LA6_;
}
goto BeforeRet_;
}
LA6_: ;
result += ((NI) 1);
i_2 += ((NI) 1);
}
LA3: ;
}
}
result = ((NI) -1);
}
	BeforeRet_: ;
		return result;
}

static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2) {
	void* T1_;
T1_ = ((void*) 0);
T1_ = memcpy(dest_p0, source_p1, ((size_t) (size_p2)));
}

static N_INLINE(void, copyMem__system_u1724)(void* dest_p0, void* source_p1, NI size_p2) {
	nimCopyMem(dest_p0, source_p1, size_p2);
}

static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1) {
	{
	if ((!((((NI) 0) < src_p1.len)))) {
	goto LA3_;
}
copyMem__system_u1724(((void*) (((&(*(*dest_p0).p).data[(*dest_p0).len])))), ((void*) (((&(*src_p1.p).data[((NI) 0)])))), (src_p1.len));
(*dest_p0).len += src_p1.len;
(*(*dest_p0).p).data[(*dest_p0).len] = 0;
}
LA3_: ;
}

N_LIB_PRIVATE N_NIMCALL(NCSTRING*, envToCStringArray__pureZosproc_u733)(void) {
	NCSTRING* result;
NI counter_1;
void* T7_;
NI i_2;
result = ((NCSTRING*) 0);
counter_1 = ((NI) 0);
{
	NimStringV2 key_1;
NimStringV2 val_1;
key_1.len = 0;
key_1.p = NIM_NIL;
val_1.len = 0;
val_1.p = NIM_NIL;
{
	tyTuple__UV3llMMYFckfui8YMBuUZA ai_1;
NI i_1;
nimZeroMem(((void*) ((&ai_1))), sizeof(tyTuple__UV3llMMYFckfui8YMBuUZA));
i_1 = ((NI) 0);
{
	while (1) {
	NIM_BOOL T5_;
NimStringV2 kv_1;
NI p_1;
tyTuple__UV3llMMYFckfui8YMBuUZA T6_;
T5_ = ((NIM_BOOL) 0);
T5_ = eqeq___system_u8282(environ[i_1], ((NCSTRING) NIM_NIL));
if ((!((!(T5_))))) {
	goto LA4;
}
kv_1.len = 0;
kv_1.p = NIM_NIL;
kv_1 = cstrToNimstr(environ[i_1]);
i_1 += ((NI) 1);
p_1 = find__pureZparseutils_u628(kv_1, 61);
T6_.Field0 = substr__system_u8338(kv_1, ((NI) 0), ((NI) (p_1 - ((NI) 1))));
T6_.Field1 = substr__system_u8351(kv_1, ((NI) (p_1 + ((NI) 1))));
eqsink___stdZprivateZospaths2_u315(((&ai_1)), ((&T6_)));
eqsink___system_u2633(((&key_1)), ai_1.Field0);
eqwasMoved___system_u2621(((&ai_1.Field0)));
eqsink___system_u2633(((&val_1)), ai_1.Field1);
eqwasMoved___system_u2621(((&ai_1.Field1)));
counter_1 += ((NI) 1);
eqdestroy___system_u2624(kv_1);
}
LA4: ;
}
eqdestroy___stdZprivateZospaths2_u306(((&ai_1)));
}
eqdestroy___system_u2624(val_1);
eqdestroy___system_u2624(key_1);
}
T7_ = ((void*) 0);
T7_ = alloc0Impl__system_u1742((((NI) (((NI) (counter_1 + ((NI) 1))) * ((NI) 8)))));
result = ((NCSTRING*) (T7_));
i_2 = ((NI) 0);
{
	NimStringV2 key_2;
NimStringV2 val_2;
key_2.len = 0;
key_2.p = NIM_NIL;
val_2.len = 0;
val_2.p = NIM_NIL;
{
	tyTuple__UV3llMMYFckfui8YMBuUZA ai_2;
NI i_3;
nimZeroMem(((void*) ((&ai_2))), sizeof(tyTuple__UV3llMMYFckfui8YMBuUZA));
i_3 = ((NI) 0);
{
	while (1) {
	NIM_BOOL T12_;
NimStringV2 kv_2;
NimStringV2 x_1;
NI p_2;
tyTuple__UV3llMMYFckfui8YMBuUZA T13_;
NimStringV2 T14_;
void* T15_;
T12_ = ((NIM_BOOL) 0);
T12_ = eqeq___system_u8282(environ[i_3], ((NCSTRING) NIM_NIL));
if ((!((!(T12_))))) {
	goto LA11;
}
kv_2.len = 0;
kv_2.p = NIM_NIL;
x_1.len = 0;
x_1.p = NIM_NIL;
kv_2 = cstrToNimstr(environ[i_3]);
i_3 += ((NI) 1);
p_2 = find__pureZparseutils_u628(kv_2, 61);
T13_.Field0 = substr__system_u8338(kv_2, ((NI) 0), ((NI) (p_2 - ((NI) 1))));
T13_.Field1 = substr__system_u8351(kv_2, ((NI) (p_2 + ((NI) 1))));
eqsink___stdZprivateZospaths2_u315(((&ai_2)), ((&T13_)));
eqsink___system_u2633(((&key_2)), ai_2.Field0);
eqwasMoved___system_u2621(((&ai_2.Field0)));
eqsink___system_u2633(((&val_2)), ai_2.Field1);
eqwasMoved___system_u2621(((&ai_2.Field1)));
T14_.len = 0;
T14_.p = NIM_NIL;
T14_ = rawNewString(((1 + key_2.len) + val_2.len));
appendString(((&T14_)), key_2);
appendString(((&T14_)), TM__HZdw8BhppcTQo8DIK46LSg_11);
appendString(((&T14_)), val_2);
x_1 = T14_;
T15_ = ((void*) 0);
T15_ = allocImpl__system_u1740((((NI) (x_1.len + ((NI) 1)))));
result[i_2] = ((NCSTRING) (T15_));
copyMem__system_u1724(((void*) (result[i_2])), ((void*) (((&(x_1).p->data[((NI) 0)])))), (((NI) (x_1.len + ((NI) 1)))));
i_2 += ((NI) 1);
eqdestroy___system_u2624(x_1);
eqdestroy___system_u2624(kv_2);
}
LA11: ;
}
eqdestroy___stdZprivateZospaths2_u306(((&ai_2)));
}
eqdestroy___system_u2624(val_2);
eqdestroy___system_u2624(key_2);
}
	return result;
}

N_LIB_PRIVATE N_NIMCALL(NCSTRING*, envToCStringArray__pureZosproc_u721)(tyObject_StringTableObj__0P3m7501aN2ol2UKnK1guw* t_p0) {
	NCSTRING* result;
NI T1_;
void* T2_;
NI i_1;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result = ((NCSTRING*) 0);
T1_ = ((NI) 0);
T1_ = nstlen(t_p0);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
T2_ = ((void*) 0);
T2_ = alloc0Impl__system_u1742((((NI) (((NI) (T1_ + ((NI) 1))) * ((NI) 8)))));
result = ((NCSTRING*) (T2_));
i_1 = ((NI) 0);
{
	NimStringV2 key_1;
NimStringV2 val_1;
key_1.len = 0;
key_1.p = NIM_NIL;
val_1.len = 0;
val_1.p = NIM_NIL;
{
	NI h_1;
NI colontmp_;
NI T5_;
NI res_1;
h_1 = ((NI) 0);
colontmp_ = ((NI) 0);
T5_ = ((*t_p0).data.len - 1);
colontmp_ = T5_;
res_1 = ((NI) 0);
{
	while (1) {
	if ((!((res_1 <= colontmp_)))) {
	goto LA7;
}
h_1 = ((NI) (res_1));
{
	NimStringV2 x_1;
NimStringV2 T12_;
void* T13_;
if ((!(((*t_p0).data).p->data[h_1].Field2))) {
	goto LA10_;
}
x_1.len = 0;
x_1.p = NIM_NIL;
eqcopy___system_u2627(((&key_1)), ((*t_p0).data).p->data[h_1].Field0);
eqcopy___system_u2627(((&val_1)), ((*t_p0).data).p->data[h_1].Field1);
T12_.len = 0;
T12_.p = NIM_NIL;
T12_ = rawNewString(((1 + key_1.len) + val_1.len));
appendString(((&T12_)), key_1);
appendString(((&T12_)), TM__HZdw8BhppcTQo8DIK46LSg_12);
appendString(((&T12_)), val_1);
x_1 = T12_;
T13_ = ((void*) 0);
T13_ = allocImpl__system_u1740((((NI) (x_1.len + ((NI) 1)))));
result[i_1] = ((NCSTRING) (T13_));
copyMem__system_u1724(((void*) (result[i_1])), ((void*) (((&(x_1).p->data[((NI) 0)])))), (((NI) (x_1.len + ((NI) 1)))));
i_1 += ((NI) 1);
eqdestroy___system_u2624(x_1);
}
LA10_: ;
res_1 += ((NI) 1);
}
LA7: ;
}
}
eqdestroy___system_u2624(val_1);
eqdestroy___system_u2624(key_1);
}
}
	BeforeRet_: ;
		return result;
}

static N_INLINE(NCSTRING, nimToCStringConv)(NimStringV2 s_p0) {
	NCSTRING result;
{
	if ((!((s_p0.len == ((NI) 0))))) {
	goto LA3_;
}
result = "";
}
goto LA1_;
LA3_: ;
{
	result = ((NCSTRING) ((*s_p0.p).data));
}
LA1_: ;
	return result;
}

N_LIB_PRIVATE N_NIMCALL(void, eqcopy___pureZosproc_u873)(tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw* dest_p0, tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw* src_p1) {
	eqcopy___system_u2627(((&(*dest_p0).sysCommand)), (*src_p1).sysCommand);
(*dest_p0).sysArgs = (*src_p1).sysArgs;
(*dest_p0).sysEnv = (*src_p1).sysEnv;
(*dest_p0).workingDir = (*src_p1).workingDir;
nimCopyMem(((void*) (*dest_p0).pStdin), ((NIM_CONST void*) (*src_p1).pStdin), sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
nimCopyMem(((void*) (*dest_p0).pStdout), ((NIM_CONST void*) (*src_p1).pStdout), sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
nimCopyMem(((void*) (*dest_p0).pStderr), ((NIM_CONST void*) (*src_p1).pStderr), sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
nimCopyMem(((void*) (*dest_p0).pErrorPipe), ((NIM_CONST void*) (*src_p1).pErrorPipe), sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
(*dest_p0).options = (*src_p1).options;
}

N_LIB_PRIVATE N_NIMCALL(void, startProcessFail__pureZosproc_u946)(tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw* data_p0, int error_p1) {
	NI T1_;
T1_ = ((NI) 0);
T1_ = write((*data_p0).pErrorPipe[(((NI) 1) - 0)], ((void*) (((&error_p1)))), ((NI) 4));
(void)T1_;
_exit(((int) 1));
}

static N_INLINE(NI, nimCStrLen)(NCSTRING a_p0) {
	NI result;
size_t T5_;
{
		result = ((NI) 0);
{
	if ((!((a_p0 == 0)))) {
	goto LA3_;
}
result = ((NI) 0);
goto BeforeRet_;
}
LA3_: ;
T5_ = ((size_t) 0);
T5_ = strlen(a_p0);
result = ((NI) (T5_));
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_CDECL(void, startProcessAfterFork__pureZosproc_u765)(tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw* data_p0) {
	int T42_;
int T43_;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
{
	int T5_;
int T11_;
int T17_;
if ((!((!((((*data_p0).options & (((NU8) 1) << (((NU) ((tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw) 4)) & 7U))) != 0)))))) {
	goto LA3_;
}
T5_ = ((int) 0);
T5_ = close((*data_p0).pStdin[(((NI) 1) - 0)]);
(void)T5_;
{
	int T8_;
T8_ = ((int) 0);
T8_ = dup2((*data_p0).pStdin[(((NI) 0) - 0)], ((int) 0));
if ((!((T8_ < ((NI32) 0))))) {
	goto LA9_;
}
startProcessFail__pureZosproc_u946(data_p0, errno);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
LA9_: ;
T11_ = ((int) 0);
T11_ = close((*data_p0).pStdout[(((NI) 0) - 0)]);
(void)T11_;
{
	int T14_;
T14_ = ((int) 0);
T14_ = dup2((*data_p0).pStdout[(((NI) 1) - 0)], ((int) 1));
if ((!((T14_ < ((NI32) 0))))) {
	goto LA15_;
}
startProcessFail__pureZosproc_u946(data_p0, errno);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
LA15_: ;
T17_ = ((int) 0);
T17_ = close((*data_p0).pStderr[(((NI) 0) - 0)]);
(void)T17_;
{
	if ((!((((*data_p0).options & (((NU8) 1) << (((NU) ((tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw) 3)) & 7U))) != 0)))) {
	goto LA20_;
}
{
	int T24_;
T24_ = ((int) 0);
T24_ = dup2((*data_p0).pStdout[(((NI) 1) - 0)], ((int) 2));
if ((!((T24_ < ((NI32) 0))))) {
	goto LA25_;
}
startProcessFail__pureZosproc_u946(data_p0, errno);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
LA25_: ;
}
goto LA18_;
LA20_: ;
{
	{
	int T30_;
T30_ = ((int) 0);
T30_ = dup2((*data_p0).pStderr[(((NI) 1) - 0)], ((int) 2));
if ((!((T30_ < ((NI32) 0))))) {
	goto LA31_;
}
startProcessFail__pureZosproc_u946(data_p0, errno);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
LA31_: ;
}
LA18_: ;
}
LA3_: ;
{
	if ((!((((NI) 0) < nimCStrLen((*data_p0).workingDir))))) {
	goto LA35_;
}
{
	int T39_;
T39_ = ((int) 0);
T39_ = chdir((*data_p0).workingDir);
if ((!((T39_ < ((NI32) 0))))) {
	goto LA40_;
}
startProcessFail__pureZosproc_u946(data_p0, errno);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
LA40_: ;
}
LA35_: ;
T42_ = ((int) 0);
T42_ = close((*data_p0).pErrorPipe[(((NI) 0) - 0)]);
(void)T42_;
T43_ = ((int) 0);
T43_ = fcntl((*data_p0).pErrorPipe[(((NI) 1) - 0)], F_SETFD, FD_CLOEXEC);
(void)T43_;
{
	int T48_;
if ((!((((*data_p0).options & (((NU8) 1) << (((NU) ((tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw) 1)) & 7U))) != 0)))) {
	goto LA46_;
}
environ = (*data_p0).sysEnv;
T48_ = ((int) 0);
T48_ = execvp(nimToCStringConv((*data_p0).sysCommand), (*data_p0).sysArgs);
(void)T48_;
}
goto LA44_;
LA46_: ;
{
	int T50_;
T50_ = ((int) 0);
T50_ = execve(nimToCStringConv((*data_p0).sysCommand), (*data_p0).sysArgs, (*data_p0).sysEnv);
(void)T50_;
}
LA44_: ;
startProcessFail__pureZosproc_u946(data_p0, errno);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
	BeforeRet_: ;
}

N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZosproc_u870)(tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw* dest_p0) {
	eqdestroy___system_u2624((*dest_p0).sysCommand);
}

N_LIB_PRIVATE N_NIMCALL(pid_t, startProcessAuxFork__pureZosproc_u763)(tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw* data_p0) {
	pid_t result;
tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw dataCopy_1;
pid_t pid_1;
int T13_;
int error_1;
NI sizeRead_1;
int T28_;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result = ((pid_t) 0);
{
	int T3_;
NI32 T6_;
T3_ = ((int) 0);
T3_ = pipe((*data_p0).pErrorPipe);
if ((!((!((T3_ == ((NI32) 0))))))) {
	goto LA4_;
}
T6_ = ((NI32) 0);
T6_ = osLastError__stdZoserrors_u122();
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
raiseOSError__stdZoserrors_u119(T6_, TM__HZdw8BhppcTQo8DIK46LSg_13);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
LA4_: ;
nimZeroMem(((void*) ((&dataCopy_1))), sizeof(tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw));
pid_1 = ((pid_t) 0);
eqcopy___pureZosproc_u873(((&dataCopy_1)), data_p0);
pid_1 = fork();
{
	if ((!((pid_1 == ((NI32) 0))))) {
	goto LA11_;
}
startProcessAfterFork__pureZosproc_u765(((&dataCopy_1)));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA8_;
}
_exit(((int) 1));
}
LA11_: ;
T13_ = ((int) 0);
T13_ = close((*data_p0).pErrorPipe[(((NI) 1) - 0)]);
(void)T13_;
{
	NI32 T18_;
if ((!((pid_1 < ((NI32) 0))))) {
	goto LA16_;
}
T18_ = ((NI32) 0);
T18_ = osLastError__stdZoserrors_u122();
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA8_;
}
raiseOSError__stdZoserrors_u119(T18_, TM__HZdw8BhppcTQo8DIK46LSg_14);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA8_;
}
}
LA16_: ;
error_1 = ((int) 0);
sizeRead_1 = read((*data_p0).pErrorPipe[(((NI) 0) - 0)], ((void*) (((&error_1)))), ((NI) 4));
{
	NimStringV2 colontmpD_;
NimStringV2 colontmpD__2;
NimStringV2 T24_;
NCSTRING T25_;
if ((!((sizeRead_1 == ((NI) 4))))) {
	goto LA21_;
}
colontmpD_.len = 0;
colontmpD_.p = NIM_NIL;
colontmpD__2.len = 0;
colontmpD__2.p = NIM_NIL;
T24_.len = 0;
T24_.p = NIM_NIL;
T25_ = ((NCSTRING) 0);
T25_ = strerror(error_1);
colontmpD_ = cstrToNimstr(T25_);
T24_ = rawNewString(((38 + (*data_p0).sysCommand.len) + colontmpD_.len));
appendString(((&T24_)), TM__HZdw8BhppcTQo8DIK46LSg_16);
appendString(((&T24_)), (*data_p0).sysCommand);
appendString(((&T24_)), TM__HZdw8BhppcTQo8DIK46LSg_18);
appendString(((&T24_)), colontmpD_);
colontmpD__2 = T24_;
raiseOSError__stdZoserrors_u119(((NI32) (error_1)), colontmpD__2);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA23_;
}
{
	LA23_: ;
}
{
	eqdestroy___system_u2624(colontmpD__2);
eqdestroy___system_u2624(colontmpD_);
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA8_;
}
}
LA21_: ;
result = pid_1;
eqdestroy___pureZosproc_u870(((&dataCopy_1)));
T28_ = ((int) 0);
T28_ = close((*data_p0).pErrorPipe[(((NI) 0) - 0)]);
(void)T28_;
goto BeforeRet_;
{
	LA8_: ;
}
{
	eqdestroy___pureZosproc_u870(((&dataCopy_1)));
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA7_;
}
{
	LA7_: ;
}
{
	int T33_;
T33_ = ((int) 0);
T33_ = close((*data_p0).pErrorPipe[(((NI) 0) - 0)]);
(void)T33_;
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA*, nospstartProcess)(NimStringV2 command_p0, NimStringV2 workingDir_p1, NimStringV2* args_p2, NI args_p2Len_0, tyObject_StringTableObj__0P3m7501aN2ol2UKnK1guw* env_p3, tySet_tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw options_p4) {
	tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* result;
tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw data_1;
tySequence__sM4lkSb7zS6F7OVMvW9cffQ sysArgsRaw_1;
tyArray__NO6udWOtIkldhscb9cksBow pStdin_1;
tyArray__NO6udWOtIkldhscb9cksBow pStdout_1;
tyArray__NO6udWOtIkldhscb9cksBow pStderr_1;
pid_t pid_1;
NCSTRING* sysArgs_1;
NCSTRING* colontmpD__4;
NCSTRING* colontmpD__5;
NCSTRING* sysEnv_1;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result = NIM_NIL;
nimZeroMem(((void*) ((&data_1))), sizeof(tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw));
sysArgsRaw_1.len = 0;
sysArgsRaw_1.p = NIM_NIL;
nimZeroMem(((void*) pStdin_1), sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
nimZeroMem(((void*) pStdin_1), sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
nimZeroMem(((void*) pStdout_1), sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
nimZeroMem(((void*) pStdout_1), sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
nimZeroMem(((void*) pStderr_1), sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
nimZeroMem(((void*) pStderr_1), sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
eqdestroy___pureZosproc_u216(result);
result = ((tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA*) nimNewObj(sizeof(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA), NIM_ALIGNOF(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA)));
(*result).Sup.m_type = (&NTIv2__nmbwhtRW8vPb4MWVUOiwqA_);
(*result).options = options_p4;
(*result).exitFlag = NIM_TRUE;
{
	if ((!((!(((options_p4 & (((NU8) 1) << (((NU) ((tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw) 4)) & 7U))) != 0)))))) {
	goto LA4_;
}
{
	NIM_BOOL T8_;
NIM_BOOL T9_;
int T10_;
int T12_;
int T14_;
NI32 T17_;
T8_ = ((NIM_BOOL) 0);
T9_ = ((NIM_BOOL) 0);
T10_ = ((int) 0);
T10_ = pipe(pStdin_1);
T9_ = (!((T10_ == ((NI32) 0))));
if (T9_) {
	goto LA11_;
}
T12_ = ((int) 0);
T12_ = pipe(pStdout_1);
T9_ = (!((T12_ == ((NI32) 0))));
LA11_: ;
T8_ = T9_;
if (T8_) {
	goto LA13_;
}
T14_ = ((int) 0);
T14_ = pipe(pStderr_1);
T8_ = (!((T14_ == ((NI32) 0))));
LA13_: ;
if ((!(T8_))) {
	goto LA15_;
}
T17_ = ((NI32) 0);
T17_ = osLastError__stdZoserrors_u122();
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
raiseOSError__stdZoserrors_u119(T17_, TM__HZdw8BhppcTQo8DIK46LSg_4);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
}
LA15_: ;
}
LA4_: ;
nimZeroMem(((void*) ((&data_1))), sizeof(tyObject_StartProcessData__i2TL1K5c1AKQja5vKOjcUw));
{
	NimStringV2 colontmpD_;
if ((!(((options_p4 & (((NU8) 1) << (((NU) ((tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw) 2)) & 7U))) != 0)))) {
	goto LA20_;
}
colontmpD_.len = 0;
colontmpD_.p = NIM_NIL;
eqsink___system_u2633(((&data_1.sysCommand)), TM__HZdw8BhppcTQo8DIK46LSg_6);
sysArgsRaw_1.len = 3;
sysArgsRaw_1.p = ((tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(3, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2)));
(sysArgsRaw_1).p->data[0] = TM__HZdw8BhppcTQo8DIK46LSg_7;
(sysArgsRaw_1).p->data[1] = TM__HZdw8BhppcTQo8DIK46LSg_9;
colontmpD_ = eqdup___system_u2630(command_p0);
(sysArgsRaw_1).p->data[2] = colontmpD_;
}
goto LA18_;
LA20_: ;
{
	NimStringV2 colontmpD__2;
colontmpD__2.len = 0;
colontmpD__2.p = NIM_NIL;
eqcopy___system_u2627(((&data_1.sysCommand)), command_p0);
sysArgsRaw_1.len = 1;
sysArgsRaw_1.p = ((tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(1, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2)));
colontmpD__2 = eqdup___system_u2630(command_p0);
(sysArgsRaw_1).p->data[0] = colontmpD__2;
{
	NimStringV2* arg_1;
NI i_1;
arg_1 = ((NimStringV2*) 0);
i_1 = ((NI) 0);
{
	while (1) {
	NimStringV2 colontmpD__3;
if ((!((i_1 < args_p2Len_0)))) {
	goto LA25;
}
colontmpD__3.len = 0;
colontmpD__3.p = NIM_NIL;
arg_1 = ((&args_p2[i_1]));
colontmpD__3 = eqdup___system_u2630((*arg_1));
add__stdZenumutils_u71(((&sysArgsRaw_1)), colontmpD__3);
i_1 += ((NI) 1);
}
LA25: ;
}
}
}
LA18_: ;
pid_1 = ((pid_t) 0);
sysArgs_1 = allocCStringArray__system_u3805(((sysArgsRaw_1).p ? (sysArgsRaw_1).p->data : NIM_NIL), sysArgsRaw_1.len);
colontmpD__4 = ((NCSTRING*) 0);
colontmpD__5 = ((NCSTRING*) 0);
{
	if ((!((env_p3 == ((tyObject_StringTableObj__0P3m7501aN2ol2UKnK1guw*) NIM_NIL))))) {
	goto LA29_;
}
colontmpD__4 = envToCStringArray__pureZosproc_u733();
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA26_;
}
sysEnv_1 = colontmpD__4;
}
goto LA27_;
LA29_: ;
{
	colontmpD__5 = envToCStringArray__pureZosproc_u721(env_p3);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA26_;
}
sysEnv_1 = colontmpD__5;
}
LA27_: ;
data_1.sysArgs = sysArgs_1;
data_1.sysEnv = sysEnv_1;
nimCopyMem(((void*) data_1.pStdin), ((NIM_CONST void*) pStdin_1), sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
nimCopyMem(((void*) data_1.pStdout), ((NIM_CONST void*) pStdout_1), sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
nimCopyMem(((void*) data_1.pStderr), ((NIM_CONST void*) pStderr_1), sizeof(tyArray__NO6udWOtIkldhscb9cksBow));
data_1.workingDir = nimToCStringConv(workingDir_p1);
data_1.options = options_p4;
pid_1 = startProcessAuxFork__pureZosproc_u763(((&data_1)));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA32_;
}
{
	NimStringV2 colontmpD__6;
tyArray__24KAM9afIUgUaqBaEBB6r9bg T38_;
if ((!(((options_p4 & (((NU8) 1) << (((NU) ((tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw) 0)) & 7U))) != 0)))) {
	goto LA35_;
}
colontmpD__6.len = 0;
colontmpD__6.p = NIM_NIL;
T38_[0] = command_p0;
T38_[1] = TM__HZdw8BhppcTQo8DIK46LSg_20;
colontmpD__6 = nsuJoinSep(args_p2, args_p2Len_0, TM__HZdw8BhppcTQo8DIK46LSg_21);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA37_;
}
T38_[2] = colontmpD__6;
echoBinSafe(T38_, 3);
{
	LA37_: ;
}
{
	eqdestroy___system_u2624(colontmpD__6);
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA32_;
}
}
LA35_: ;
(*result).id = pid_1;
(*result).exitFlag = NIM_FALSE;
{
	if ((!(((options_p4 & (((NU8) 1) << (((NU) ((tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw) 4)) & 7U))) != 0)))) {
	goto LA43_;
}
(*result).inHandle = ((int) 0);
(*result).outHandle = ((int) 1);
{
	if ((!(((options_p4 & (((NU8) 1) << (((NU) ((tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw) 3)) & 7U))) != 0)))) {
	goto LA47_;
}
(*result).errHandle = (*result).outHandle;
}
goto LA45_;
LA47_: ;
{
	(*result).errHandle = ((int) 2);
}
LA45_: ;
}
goto LA41_;
LA43_: ;
{
	int T57_;
int T58_;
int T59_;
(*result).inHandle = pStdin_1[(((NI) 1) - 0)];
(*result).outHandle = pStdout_1[(((NI) 0) - 0)];
{
	int T55_;
if ((!(((options_p4 & (((NU8) 1) << (((NU) ((tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw) 3)) & 7U))) != 0)))) {
	goto LA53_;
}
(*result).errHandle = (*result).outHandle;
T55_ = ((int) 0);
T55_ = close(pStderr_1[(((NI) 0) - 0)]);
(void)T55_;
}
goto LA51_;
LA53_: ;
{
	(*result).errHandle = pStderr_1[(((NI) 0) - 0)];
}
LA51_: ;
T57_ = ((int) 0);
T57_ = close(pStderr_1[(((NI) 1) - 0)]);
(void)T57_;
T58_ = ((int) 0);
T58_ = close(pStdin_1[(((NI) 0) - 0)]);
(void)T58_;
T59_ = ((int) 0);
T59_ = close(pStdout_1[(((NI) 1) - 0)]);
(void)T59_;
}
LA41_: ;
{
	LA32_: ;
}
{
	deallocCStringArray__system_u3859(sysEnv_1);
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA26_;
}
{
	LA26_: ;
}
{
	deallocCStringArray__system_u3859(sysArgs_1);
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
{
	LA1_: ;
}
{
	eqdestroy___system_u3714(sysArgsRaw_1);
eqdestroy___pureZosproc_u870(((&data_1)));
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(tyObject_FileStreamObj__LbEzkl9aTALZDJEfP9c09a3QQ*, createStream__pureZosproc_u1060)(int* handle_p0, tyEnum_FileMode__m6ZEz9b9czV5YJ5lg4IK9bc4Q fileMode_p1) {
	tyObject_FileStreamObj__LbEzkl9aTALZDJEfP9c09a3QQ* result;
FILE* f_1;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result = NIM_NIL;
f_1 = 0;
{
	NIM_BOOL T3_;
NI32 T6_;
T3_ = ((NIM_BOOL) 0);
T3_ = open__stdZsyncio_u475((&f_1), (*handle_p0), fileMode_p1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
if ((!((!(T3_))))) {
	goto LA4_;
}
T6_ = ((NI32) 0);
T6_ = osLastError__stdZoserrors_u122();
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
raiseOSError__stdZoserrors_u119(T6_, TM__HZdw8BhppcTQo8DIK46LSg_22);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
LA4_: ;
result = newFileStream__pureZstreams_u1072(f_1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
goto BeforeRet_;
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ*, nospinputStream)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* p_p0) {
	tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* result;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result = NIM_NIL;
{
	tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ** T5_;
tyObject_FileStreamObj__LbEzkl9aTALZDJEfP9c09a3QQ* T6_;
if ((!(((*p_p0).inStream == ((tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ*) NIM_NIL))))) {
	goto LA3_;
}
T5_ = ((tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ**) 0);
T5_ = (&(*p_p0).inStream);
T6_ = NIM_NIL;
T6_ = createStream__pureZosproc_u1060(((&(*p_p0).inHandle)), ((tyEnum_FileMode__m6ZEz9b9czV5YJ5lg4IK9bc4Q) 1));
if (NIM_UNLIKELY((*nimErr_))) {
	eqdestroy___pureZstreams_u980(T6_);
	goto BeforeRet_;
}
eqsink___pureZstreams_u684(T5_, (&T6_->Sup));
}
LA3_: ;
eqcopy___pureZstreams_u676((&result), (*p_p0).inStream, NIM_FALSE);
goto BeforeRet_;
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ*, nospoutputStream)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* p_p0) {
	tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* result;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result = NIM_NIL;
{
	tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ** T5_;
tyObject_FileStreamObj__LbEzkl9aTALZDJEfP9c09a3QQ* T6_;
if ((!(((*p_p0).outStream == ((tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ*) NIM_NIL))))) {
	goto LA3_;
}
T5_ = ((tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ**) 0);
T5_ = (&(*p_p0).outStream);
T6_ = NIM_NIL;
T6_ = createStream__pureZosproc_u1060(((&(*p_p0).outHandle)), ((tyEnum_FileMode__m6ZEz9b9czV5YJ5lg4IK9bc4Q) 0));
if (NIM_UNLIKELY((*nimErr_))) {
	eqdestroy___pureZstreams_u980(T6_);
	goto BeforeRet_;
}
eqsink___pureZstreams_u684(T5_, (&T6_->Sup));
}
LA3_: ;
eqcopy___pureZstreams_u676((&result), (*p_p0).outStream, NIM_FALSE);
goto BeforeRet_;
}
	BeforeRet_: ;
		return result;
}

static N_INLINE(NI, percentpercent___system_u865)(NI x_p0, NI y_p1) {
	NI result;
result = ((NI) (((NU) (((NU64) ((NU) (x_p0))) % ((NU64) ((NU) (y_p1)))))));
	return result;
}

N_LIB_PRIVATE N_NIMCALL(NI, nospwaitForExit)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* p_p0, NI timeout_p1) {
	NI result;
int T73_;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result = ((NI) 0);
{
	int T5_;
if ((!((*p_p0).exitFlag))) {
	goto LA3_;
}
T5_ = ((int) 0);
T5_ = exitStatusLikeShell__pureZos_u163((*p_p0).exitStatus);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
result = ((NI) (T5_));
goto BeforeRet_;
}
LA3_: ;
{
	int status_1;
if ((!((timeout_p1 == ((NI) -1))))) {
	goto LA8_;
}
status_1 = ((int) 1);
{
	pid_t T12_;
NI32 T15_;
T12_ = ((pid_t) 0);
T12_ = waitpid((*p_p0).id, ((&status_1)), ((int) 0));
if ((!((T12_ < ((NI32) 0))))) {
	goto LA13_;
}
T15_ = ((NI32) 0);
T15_ = osLastError__stdZoserrors_u122();
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
raiseOSError__stdZoserrors_u119(T15_, TM__HZdw8BhppcTQo8DIK46LSg_23);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
LA13_: ;
(*p_p0).exitFlag = NIM_TRUE;
(*p_p0).exitStatus = status_1;
}
goto LA6_;
LA8_: ;
{
	int kqFD_1;
struct kevent kevIn_1;
struct kevent kevOut_1;
struct timespec tmspec_1;
kqFD_1 = kqueue();
{
	NI32 T21_;
if ((!((kqFD_1 == ((NI32) -1))))) {
	goto LA19_;
}
T21_ = ((NI32) 0);
T21_ = osLastError__stdZoserrors_u122();
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
raiseOSError__stdZoserrors_u119(T21_, TM__HZdw8BhppcTQo8DIK46LSg_24);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
LA19_: ;
nimZeroMem(((void*) ((&kevIn_1))), sizeof(struct kevent));
kevIn_1.ident = ((NU) ((*p_p0).id));
kevIn_1.filter = ((short) -5);
kevIn_1.flags = ((unsigned short) 1);
kevIn_1.fflags = ((NU32) IL64(2147483648));
nimZeroMem(((void*) ((&kevOut_1))), sizeof(struct kevent));
nimZeroMem(((void*) ((&tmspec_1))), sizeof(struct timespec));
{
	NI T26_;
if ((!((((NI) 1000) <= timeout_p1)))) {
	goto LA24_;
}
tmspec_1.tv_sec = ((time_t) (((NI) (timeout_p1 / ((NI) 1000)))));
T26_ = ((NI) 0);
T26_ = percentpercent___system_u865(timeout_p1, ((NI) 1000));
tmspec_1.tv_nsec = ((NI) (T26_ * ((NI) 1000000)));
}
goto LA22_;
LA24_: ;
{
	tmspec_1.tv_sec = ((time_t) 0);
tmspec_1.tv_nsec = ((NI) (timeout_p1 * ((NI) 1000000)));
}
LA22_: ;
{
	while (1) {
	int status_2;
int count_1;
status_2 = ((int) 1);
count_1 = kevent(kqFD_1, ((&kevIn_1)), ((int) 1), ((&kevOut_1)), ((int) 1), ((&tmspec_1)));
{
	NI32 err_1;
if ((!((count_1 < ((NI32) 0))))) {
	goto LA33_;
}
err_1 = osLastError__stdZoserrors_u122();
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA28_;
}
{
	NI32 T39_;
if ((!((!((((int) (err_1)) == EINTR)))))) {
	goto LA37_;
}
T39_ = ((NI32) 0);
T39_ = osLastError__stdZoserrors_u122();
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA28_;
}
raiseOSError__stdZoserrors_u119(T39_, TM__HZdw8BhppcTQo8DIK46LSg_25);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA28_;
}
}
LA37_: ;
}
goto LA31_;
LA33_: ;
{
	if ((!((count_1 == ((NI32) 0))))) {
	goto LA41_;
}
{
	int T45_;
NI32 T48_;
T45_ = ((int) 0);
T45_ = kill((*p_p0).id, SIGKILL);
if ((!((T45_ == ((NI32) -1))))) {
	goto LA46_;
}
T48_ = ((NI32) 0);
T48_ = osLastError__stdZoserrors_u122();
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA28_;
}
raiseOSError__stdZoserrors_u119(T48_, TM__HZdw8BhppcTQo8DIK46LSg_26);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA28_;
}
}
LA46_: ;
{
	pid_t T51_;
NI32 T54_;
T51_ = ((pid_t) 0);
T51_ = waitpid((*p_p0).id, ((&status_2)), ((int) 0));
if ((!((T51_ < ((NI32) 0))))) {
	goto LA52_;
}
T54_ = ((NI32) 0);
T54_ = osLastError__stdZoserrors_u122();
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA28_;
}
raiseOSError__stdZoserrors_u119(T54_, TM__HZdw8BhppcTQo8DIK46LSg_27);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA28_;
}
}
LA52_: ;
(*p_p0).exitFlag = NIM_TRUE;
(*p_p0).exitStatus = status_2;
goto LA29;
}
goto LA31_;
LA41_: ;
{
	{
	NIM_BOOL T58_;
T58_ = ((NIM_BOOL) 0);
T58_ = (kevOut_1.ident == ((NU) ((*p_p0).id)));
if ((!(T58_))) {
	goto LA59_;
}
T58_ = (kevOut_1.filter == ((NI16) -5));
LA59_: ;
if ((!(T58_))) {
	goto LA60_;
}
{
	pid_t T64_;
NI32 T67_;
T64_ = ((pid_t) 0);
T64_ = waitpid((*p_p0).id, ((&status_2)), ((int) 0));
if ((!((T64_ < ((NI32) 0))))) {
	goto LA65_;
}
T67_ = ((NI32) 0);
T67_ = osLastError__stdZoserrors_u122();
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA28_;
}
raiseOSError__stdZoserrors_u119(T67_, TM__HZdw8BhppcTQo8DIK46LSg_28);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA28_;
}
}
LA65_: ;
(*p_p0).exitFlag = NIM_TRUE;
(*p_p0).exitStatus = status_2;
goto LA29;
}
goto LA56_;
LA60_: ;
{
	NI32 T69_;
T69_ = ((NI32) 0);
T69_ = osLastError__stdZoserrors_u122();
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA28_;
}
raiseOSError__stdZoserrors_u119(T69_, TM__HZdw8BhppcTQo8DIK46LSg_29);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA28_;
}
}
LA56_: ;
}
LA31_: ;
}
}
LA29: ;
{
	LA28_: ;
}
{
	int T72_;
T72_ = ((int) 0);
T72_ = close(kqFD_1);
(void)T72_;
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
LA6_: ;
T73_ = ((int) 0);
T73_ = exitStatusLikeShell__pureZos_u163((*p_p0).exitStatus);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
result = ((NI) (T73_));
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(void, nospclose)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* p_p0) {
	NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
{
	if ((!((!((((*p_p0).options & (((NU8) 1) << (((NU) ((tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw) 4)) & 7U))) != 0)))))) {
	goto LA3_;
}
{
	if ((!((!(((*p_p0).inStream == ((tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ*) NIM_NIL))))))) {
	goto LA7_;
}
close__pureZstreams_u58((*p_p0).inStream);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
goto LA5_;
LA7_: ;
{
	int T10_;
T10_ = ((int) 0);
T10_ = close((*p_p0).inHandle);
(void)T10_;
}
LA5_: ;
{
	if ((!((!(((*p_p0).outStream == ((tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ*) NIM_NIL))))))) {
	goto LA13_;
}
close__pureZstreams_u58((*p_p0).outStream);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
goto LA11_;
LA13_: ;
{
	int T16_;
T16_ = ((int) 0);
T16_ = close((*p_p0).outHandle);
(void)T16_;
}
LA11_: ;
{
	if ((!((!(((*p_p0).errStream == ((tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ*) NIM_NIL))))))) {
	goto LA19_;
}
close__pureZstreams_u58((*p_p0).errStream);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
goto LA17_;
LA19_: ;
{
	int T22_;
T22_ = ((int) 0);
T22_ = close((*p_p0).errHandle);
(void)T22_;
}
LA17_: ;
}
LA3_: ;
}
	BeforeRet_: ;
}

N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZosproc_u1931)(tyTuple__XOVT24GHXwqiEj5GCsEGCA dest_p0) {
	eqdestroy___system_u2624(dest_p0.Field0);
}

N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, isExitStatus__pureZosproc_u718)(int status_p0) {
	NIM_BOOL result;
NIM_BOOL T1_;
T1_ = ((NIM_BOOL) 0);
T1_ = WIFEXITED(status_p0);
if (T1_) {
	goto LA2_;
}
T1_ = WIFSIGNALED(status_p0);
LA2_: ;
result = T1_;
	return result;
}

N_LIB_PRIVATE N_NIMCALL(NI, nosppeekExitCode)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* p_p0) {
	NI result;
int status_1;
pid_t ret_1;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
status_1 = ((int) 0);
result = ((NI) -1);
{
	int T5_;
if ((!((*p_p0).exitFlag))) {
	goto LA3_;
}
T5_ = ((int) 0);
T5_ = exitStatusLikeShell__pureZos_u163((*p_p0).exitStatus);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
result = ((NI) (T5_));
goto BeforeRet_;
}
LA3_: ;
ret_1 = waitpid((*p_p0).id, ((&status_1)), WNOHANG);
{
	if ((!((((NI32) 0) < ret_1)))) {
	goto LA8_;
}
{
	NIM_BOOL T12_;
int T15_;
T12_ = ((NIM_BOOL) 0);
T12_ = isExitStatus__pureZosproc_u718(status_1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
if ((!(T12_))) {
	goto LA13_;
}
(*p_p0).exitFlag = NIM_TRUE;
(*p_p0).exitStatus = status_1;
T15_ = ((int) 0);
T15_ = exitStatusLikeShell__pureZos_u163(status_1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
result = ((NI) (T15_));
}
LA13_: ;
}
LA8_: ;
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(tyTuple__XOVT24GHXwqiEj5GCsEGCA, execCmdEx__pureZosproc_u1887)(NimStringV2 command_p0, tySet_tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw options_p1, tyObject_StringTableObj__0P3m7501aN2ol2UKnK1guw* env_p2, NimStringV2 workingDir_p3, NimStringV2 input_p4) {
	tyTuple__XOVT24GHXwqiEj5GCsEGCA result;
tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* p_1;
tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* outp_1;
tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* colontmpD_;
NimStringV2 colontmp_;
NimStringV2 line_1;
tyArray__8ZvwQIddfpj2THRVPsFzIQ T2_;
NI colontmp__2;
NimStringV2 blitTmp_1;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
nimZeroMem(((void*) ((&result))), sizeof(tyTuple__XOVT24GHXwqiEj5GCsEGCA));
p_1 = NIM_NIL;
outp_1 = NIM_NIL;
colontmpD_ = NIM_NIL;
colontmp_.len = 0;
colontmp_.p = NIM_NIL;
line_1.len = 0;
line_1.p = NIM_NIL;
p_1 = nospstartProcess(command_p0, workingDir_p3, T2_, 0, env_p2, (options_p1 | 4));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
outp_1 = nospoutputStream(p_1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
{
	tyObject_StreamObj__gmiHWVSRJ9cDJ5nm8mQy8oQ* colontmpD__2;
if ((!((((NI) 0) < input_p4.len)))) {
	goto LA5_;
}
colontmpD__2 = NIM_NIL;
colontmpD__2 = nospinputStream(p_1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA7_;
}
write__pureZstreams_u184(colontmpD__2, input_p4);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA7_;
}
{
	LA7_: ;
}
{
	eqdestroy___pureZstreams_u673(colontmpD__2);
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
}
LA5_: ;
colontmpD_ = nospinputStream(p_1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
close__pureZstreams_u58(colontmpD_);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
colontmp_ = TM__HZdw8BhppcTQo8DIK46LSg_30;
colontmp__2 = ((NI) -1);
blitTmp_1 = colontmp_;
eqwasMoved___system_u2621(((&colontmp_)));
result.Field0 = blitTmp_1;
result.Field1 = colontmp__2;
line_1 = rawNewString(((NI) 120));
{
	while (1) {
	{
	NIM_BOOL T14_;
T14_ = ((NIM_BOOL) 0);
T14_ = readLine__pureZstreams_u555(outp_1, ((&line_1)));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
if ((!(T14_))) {
	goto LA15_;
}
prepareAdd(((&result.Field0)), (0 + line_1.len));
appendString(((&result.Field0)), line_1);
prepareAdd(((&result.Field0)), 1);
appendString(((&result.Field0)), TM__HZdw8BhppcTQo8DIK46LSg_32);
}
goto LA12_;
LA15_: ;
{
	NI T18_;
T18_ = ((NI) 0);
T18_ = nosppeekExitCode(p_1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
result.Field1 = T18_;
{
	if ((!((!((result.Field1 == ((NI) -1))))))) {
	goto LA21_;
}
goto LA10;
}
LA21_: ;
}
LA12_: ;
}
}
LA10: ;
nospclose(p_1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
{
	LA1_: ;
}
{
	eqdestroy___system_u2624(line_1);
eqdestroy___system_u2624(colontmp_);
eqdestroy___pureZstreams_u673(colontmpD_);
eqdestroy___pureZstreams_u673(outp_1);
eqdestroy___pureZosproc_u216(p_1);
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___pureZosproc_u1928)(tyTuple__XOVT24GHXwqiEj5GCsEGCA* dest_p0) {
	(*dest_p0).Field0.len = 0;
(*dest_p0).Field0.p = NIM_NIL;
(*dest_p0).Field1 = 0;
}

N_LIB_PRIVATE N_NIMCALL(NI, nospexecCmd)(NimStringV2 command_p0) {
	NI result;
int colontmpD_;
int colontmpD__2;
int tmp_1;
int T1_;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result = ((NI) 0);
colontmpD_ = ((int) 0);
colontmpD__2 = ((int) 0);
tmp_1 = system(nimToCStringConv(command_p0));
T1_ = ((int) 0);
{
	if ((!((tmp_1 == ((NI32) -1))))) {
	goto LA4_;
}
colontmpD_ = tmp_1;
T1_ = colontmpD_;
}
goto LA2_;
LA4_: ;
{
	colontmpD__2 = exitStatusLikeShell__pureZos_u163(tmp_1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
T1_ = colontmpD__2;
}
LA2_: ;
result = ((NI) (T1_));
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZosproc_u597)(tyProc__SqRJqa5aOiKB4EuKlKh9asA dest_p0) {
	{
	NIM_BOOL T3_;
T3_ = ((NIM_BOOL) 0);
T3_ = nimDecRefIsLastCyclicDyn(dest_p0.ClE_0);
if ((!(T3_))) {
	goto LA4_;
}
nimDestroyAndDispose(dest_p0.ClE_0);
}
LA4_: ;
}

N_LIB_PRIVATE N_NIMCALL(NI, nospcountProcessors)(void) {
	NI result;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result = ((NI) 0);
result = ncpicountProcessors();
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___pureZosproc_u213)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA** dest_p0) {
	(*dest_p0) = 0;
}

N_LIB_PRIVATE N_NIMCALL(void, eqsink___pureZosproc_u227)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA** dest_p0, tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* src_p1) {
	tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* colontmp_;
colontmp_ = (*dest_p0);
(*dest_p0) = src_p1;
{
	NIM_BOOL T3_;
T3_ = ((NIM_BOOL) 0);
T3_ = nimDecRefIsLastCyclicDyn(colontmp_);
if ((!(T3_))) {
	goto LA4_;
}
nimDestroyAndDispose(colontmp_);
}
LA4_: ;
}

N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, nosprunning)(tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* p_p0) {
	NIM_BOOL result;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
{
	if ((!((*p_p0).exitFlag))) {
	goto LA3_;
}
result = NIM_FALSE;
goto BeforeRet_;
}
goto LA1_;
LA3_: ;
{
	int status_1;
pid_t ret_1;
status_1 = ((int) 1);
ret_1 = waitpid((*p_p0).id, ((&status_1)), WNOHANG);
{
	if ((!((((NI) (ret_1)) == ((NI) ((*p_p0).id)))))) {
	goto LA8_;
}
{
	NIM_BOOL T12_;
T12_ = ((NIM_BOOL) 0);
T12_ = isExitStatus__pureZosproc_u718(status_1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
if ((!(T12_))) {
	goto LA13_;
}
(*p_p0).exitFlag = NIM_TRUE;
(*p_p0).exitStatus = status_1;
result = NIM_FALSE;
goto BeforeRet_;
}
goto LA10_;
LA13_: ;
{
	result = NIM_TRUE;
goto BeforeRet_;
}
LA10_: ;
}
goto LA6_;
LA8_: ;
{
	if ((!((ret_1 == ((NI32) 0))))) {
	goto LA17_;
}
result = NIM_TRUE;
goto BeforeRet_;
}
goto LA6_;
LA17_: ;
{
	NI32 T20_;
result = NIM_FALSE;
T20_ = ((NI32) 0);
T20_ = osLastError__stdZoserrors_u122();
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
raiseOSError__stdZoserrors_u119(T20_, TM__HZdw8BhppcTQo8DIK46LSg_36);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
LA6_: ;
}
LA1_: ;
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(NI, nospexecProcesses)(NimStringV2* cmds_p0, NI cmds_p0Len_0, tySet_tyEnum_ProcessOption__9aCfVUyDFjLLn9an3vvc7WLw options_p1, NI n_p2, tyProc__SqRJqa5aOiKB4EuKlKh9asA beforeRunEvent_p3, tyProc__MlXIWKY6cr9aOrsoMnbx7jA afterRunEvent_p4) {
	NI result;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result = ((NI) 0);
{
	tySequence__f1LaZFhRcYuVoOYPotMmhg q_1;
tySequence__qwqHTkRvwhrRyENtudHQ7g idxs_1;
NI i_1;
NI m_1;
NI ecount_1;
if ((!((((NI) 1) < n_p2)))) {
	goto LA3_;
}
q_1.len = 0;
q_1.p = NIM_NIL;
idxs_1.len = 0;
idxs_1.p = NIM_NIL;
i_1 = ((NI) 0);
q_1 = newSeq__pureZosproc_u133((n_p2));
idxs_1 = newSeq__pureZosproc_u366((n_p2));
m_1 = ((n_p2 <= cmds_p0Len_0) ? n_p2 : cmds_p0Len_0);
{
	while (1) {
	tyArray__8ZvwQIddfpj2THRVPsFzIQ T12_;
tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* T13_;
if ((!((i_1 < m_1)))) {
	goto LA7;
}
{
	if ((!((!(((beforeRunEvent_p3.ClP_0 == TM__HZdw8BhppcTQo8DIK46LSg_33.ClP_0) && (beforeRunEvent_p3.ClE_0 == TM__HZdw8BhppcTQo8DIK46LSg_33.ClE_0))))))) {
	goto LA10_;
}
(beforeRunEvent_p3.ClE_0 ? beforeRunEvent_p3.ClP_0(i_1, beforeRunEvent_p3.ClE_0) : ((TM__HZdw8BhppcTQo8DIK46LSg_34) beforeRunEvent_p3.ClP_0)(i_1));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA5_;
}
}
LA10_: ;
T13_ = NIM_NIL;
T13_ = nospstartProcess(cmds_p0[i_1], TM__HZdw8BhppcTQo8DIK46LSg_35, T12_, 0, ((tyObject_StringTableObj__0P3m7501aN2ol2UKnK1guw*) NIM_NIL), (options_p1 | 4));
if (NIM_UNLIKELY((*nimErr_))) {
	eqdestroy___pureZosproc_u216(T13_);
	goto LA5_;
}
eqsink___pureZosproc_u227((&(q_1).p->data[i_1]), T13_);
(idxs_1).p->data[i_1] = i_1;
i_1 += ((NI) 1);
}
LA7: ;
}
ecount_1 = cmds_p0Len_0;
{
	while (1) {
	if ((!((((NI) 0) < ecount_1)))) {
	goto LA15;
}
{
	NI rexit_1;
int status_1;
pid_t res_1;
rexit_1 = ((NI) -1);
status_1 = ((int) 1);
res_1 = waitpid(((pid_t) -1), ((&status_1)), ((int) 0));
{
	if ((!((((NI32) 0) < res_1)))) {
	goto LA19_;
}
{
	NI r_1;
NI colontmp_;
NI res_2;
r_1 = ((NI) 0);
colontmp_ = ((NI) 0);
colontmp_ = ((NI) (m_1 - ((NI) 1)));
res_2 = ((NI) 0);
{
	while (1) {
	if ((!((res_2 <= colontmp_)))) {
	goto LA23;
}
r_1 = ((NI) (res_2));
{
	NIM_BOOL T26_;
T26_ = ((NIM_BOOL) 0);
T26_ = (!(((q_1).p->data[r_1] == 0)));
if ((!(T26_))) {
	goto LA27_;
}
T26_ = ((*(q_1).p->data[r_1]).id == res_1);
LA27_: ;
if ((!(T26_))) {
	goto LA28_;
}
{
	NIM_BOOL T32_;
T32_ = ((NIM_BOOL) 0);
T32_ = WIFEXITED(status_1);
if (T32_) {
	goto LA33_;
}
T32_ = WIFSIGNALED(status_1);
LA33_: ;
if ((!(T32_))) {
	goto LA34_;
}
(*(q_1).p->data[r_1]).exitFlag = NIM_TRUE;
(*(q_1).p->data[r_1]).exitStatus = status_1;
rexit_1 = r_1;
goto LA21;
}
LA34_: ;
}
LA28_: ;
res_2 += ((NI) 1);
}
LA23: ;
}
}
LA21: ;
}
goto LA17_;
LA19_: ;
{
	NI32 err_1;
err_1 = osLastError__stdZoserrors_u122();
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA5_;
}
{
	if ((!((err_1 == ((NI32) (ECHILD)))))) {
	goto LA39_;
}
{
	NI r_2;
NI colontmp__2;
NI res_3;
r_2 = ((NI) 0);
colontmp__2 = ((NI) 0);
colontmp__2 = ((NI) (m_1 - ((NI) 1)));
res_3 = ((NI) 0);
{
	while (1) {
	if ((!((res_3 <= colontmp__2)))) {
	goto LA43;
}
r_2 = ((NI) (res_3));
{
	NIM_BOOL T46_;
NIM_BOOL T48_;
T46_ = ((NIM_BOOL) 0);
T46_ = (!(((q_1).p->data[r_2] == 0)));
if ((!(T46_))) {
	goto LA47_;
}
T48_ = ((NIM_BOOL) 0);
T48_ = nosprunning((q_1).p->data[r_2]);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA5_;
}
T46_ = (!(T48_));
LA47_: ;
if ((!(T46_))) {
	goto LA49_;
}
(*(q_1).p->data[r_2]).exitFlag = NIM_TRUE;
(*(q_1).p->data[r_2]).exitStatus = status_1;
rexit_1 = r_2;
goto LA41;
}
LA49_: ;
res_3 += ((NI) 1);
}
LA43: ;
}
}
LA41: ;
}
goto LA37_;
LA39_: ;
{
	if ((!((err_1 == ((NI32) (EINTR)))))) {
	goto LA52_;
}
goto LA16;
}
goto LA37_;
LA52_: ;
{
	raiseOSError__stdZoserrors_u119(err_1, TM__HZdw8BhppcTQo8DIK46LSg_37);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA5_;
}
}
LA37_: ;
}
LA17_: ;
{
	NI T59_;
if ((!((((NI) 0) <= rexit_1)))) {
	goto LA57_;
}
T59_ = ((NI) 0);
T59_ = nosppeekExitCode((q_1).p->data[rexit_1]);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA5_;
}
result = ((result >= ((T59_ > 0) ? (T59_) : (-(T59_)))) ? result : ((T59_ > 0) ? (T59_) : (-(T59_))));
{
	if ((!((!(((afterRunEvent_p4.ClP_0 == TM__HZdw8BhppcTQo8DIK46LSg_38.ClP_0) && (afterRunEvent_p4.ClE_0 == TM__HZdw8BhppcTQo8DIK46LSg_38.ClE_0))))))) {
	goto LA62_;
}
(afterRunEvent_p4.ClE_0 ? afterRunEvent_p4.ClP_0((idxs_1).p->data[rexit_1], (q_1).p->data[rexit_1], afterRunEvent_p4.ClE_0) : ((TM__HZdw8BhppcTQo8DIK46LSg_39) afterRunEvent_p4.ClP_0)((idxs_1).p->data[rexit_1], (q_1).p->data[rexit_1]));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA5_;
}
}
LA62_: ;
nospclose((q_1).p->data[rexit_1]);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA5_;
}
{
	tyArray__8ZvwQIddfpj2THRVPsFzIQ T72_;
tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* T73_;
if ((!((i_1 < cmds_p0Len_0)))) {
	goto LA66_;
}
{
	if ((!((!(((beforeRunEvent_p3.ClP_0 == TM__HZdw8BhppcTQo8DIK46LSg_33.ClP_0) && (beforeRunEvent_p3.ClE_0 == TM__HZdw8BhppcTQo8DIK46LSg_33.ClE_0))))))) {
	goto LA70_;
}
(beforeRunEvent_p3.ClE_0 ? beforeRunEvent_p3.ClP_0(i_1, beforeRunEvent_p3.ClE_0) : ((TM__HZdw8BhppcTQo8DIK46LSg_40) beforeRunEvent_p3.ClP_0)(i_1));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA5_;
}
}
LA70_: ;
T73_ = NIM_NIL;
T73_ = nospstartProcess(cmds_p0[i_1], TM__HZdw8BhppcTQo8DIK46LSg_41, T72_, 0, ((tyObject_StringTableObj__0P3m7501aN2ol2UKnK1guw*) NIM_NIL), (options_p1 | 4));
if (NIM_UNLIKELY((*nimErr_))) {
	eqdestroy___pureZosproc_u216(T73_);
	goto LA5_;
}
eqsink___pureZosproc_u227((&(q_1).p->data[rexit_1]), T73_);
(idxs_1).p->data[rexit_1] = i_1;
i_1 += ((NI) 1);
}
goto LA64_;
LA66_: ;
{
	eqsink___pureZosproc_u227((&(q_1).p->data[rexit_1]), ((tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA*) NIM_NIL));
}
LA64_: ;
ecount_1 -= ((NI) 1);
}
LA57_: ;
}
LA16: ;
}
LA15: ;
}
{
	LA5_: ;
}
{
	eqdestroy___pureZosproc_u450(idxs_1);
eqdestroy___pureZosproc_u307(q_1);
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
goto LA1_;
LA3_: ;
{
	{
	NI i_2;
NI colontmp__3;
NI res_4;
i_2 = ((NI) 0);
colontmp__3 = ((NI) 0);
colontmp__3 = (cmds_p0Len_0 - 1);
res_4 = ((NI) 0);
{
	while (1) {
	tyObject_ProcessObj__nmbwhtRW8vPb4MWVUOiwqA* p_1;
tyArray__8ZvwQIddfpj2THRVPsFzIQ T86_;
NI T87_;
if ((!((res_4 <= colontmp__3)))) {
	goto LA80;
}
p_1 = NIM_NIL;
i_2 = ((NI) (res_4));
{
	if ((!((!(((beforeRunEvent_p3.ClP_0 == TM__HZdw8BhppcTQo8DIK46LSg_33.ClP_0) && (beforeRunEvent_p3.ClE_0 == TM__HZdw8BhppcTQo8DIK46LSg_33.ClE_0))))))) {
	goto LA84_;
}
(beforeRunEvent_p3.ClE_0 ? beforeRunEvent_p3.ClP_0(i_2, beforeRunEvent_p3.ClE_0) : ((TM__HZdw8BhppcTQo8DIK46LSg_42) beforeRunEvent_p3.ClP_0)(i_2));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA81_;
}
}
LA84_: ;
p_1 = nospstartProcess(cmds_p0[i_2], TM__HZdw8BhppcTQo8DIK46LSg_43, T86_, 0, ((tyObject_StringTableObj__0P3m7501aN2ol2UKnK1guw*) NIM_NIL), (options_p1 | 4));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA81_;
}
T87_ = ((NI) 0);
T87_ = nospwaitForExit(p_1, ((NI) -1));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA81_;
}
result = ((((T87_ > 0) ? (T87_) : (-(T87_))) >= result) ? ((T87_ > 0) ? (T87_) : (-(T87_))) : result);
{
	if ((!((!(((afterRunEvent_p4.ClP_0 == TM__HZdw8BhppcTQo8DIK46LSg_38.ClP_0) && (afterRunEvent_p4.ClE_0 == TM__HZdw8BhppcTQo8DIK46LSg_38.ClE_0))))))) {
	goto LA90_;
}
(afterRunEvent_p4.ClE_0 ? afterRunEvent_p4.ClP_0(i_2, p_1, afterRunEvent_p4.ClE_0) : ((TM__HZdw8BhppcTQo8DIK46LSg_44) afterRunEvent_p4.ClP_0)(i_2, p_1));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA81_;
}
}
LA90_: ;
nospclose(p_1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA81_;
}
res_4 += ((NI) 1);
{
	LA81_: ;
}
{
	eqdestroy___pureZosproc_u216(p_1);
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
LA80: ;
}
}
}
LA1_: ;
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___pureZosproc_u629)(tyProc__MlXIWKY6cr9aOrsoMnbx7jA dest_p0) {
	{
	NIM_BOOL T3_;
T3_ = ((NIM_BOOL) 0);
T3_ = nimDecRefIsLastCyclicDyn(dest_p0.ClE_0);
if ((!(T3_))) {
	goto LA4_;
}
nimDestroyAndDispose(dest_p0.ClE_0);
}
LA4_: ;
}

