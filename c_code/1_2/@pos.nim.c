/* Generated by Nim Compiler v2.3.1 */
#define NIM_INTBITS 64
#include "nimbase.h"
#include <string.h>
#include <stdlib.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tyTuple__7q7q3E6Oj24ZNVJb9aonhAg tyTuple__7q7q3E6Oj24ZNVJb9aonhAg;
typedef struct tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg;
typedef struct tyObject_WIN32_FIND_DATA__Smod69cgtGov9bh3eUxylCGw tyObject_WIN32_FIND_DATA__Smod69cgtGov9bh3eUxylCGw;
typedef struct tyObject_FILETIME__rNzjJobzauTDJOCVYUQq4g tyObject_FILETIME__rNzjJobzauTDJOCVYUQq4g;
typedef struct tyObject_OSError__Rw9ambrEYSqg7o77XNSnlyw tyObject_OSError__Rw9ambrEYSqg7o77XNSnlyw;
typedef struct tyObject_CatchableError__hIs6uf9agIVTefxxTl0On8A tyObject_CatchableError__hIs6uf9agIVTefxxTl0On8A;
typedef struct Exception Exception;
typedef struct RootObj RootObj;
typedef struct TNimTypeV2 TNimTypeV2;
typedef struct tySequence__cTyVHeHOWk5jStsToosJ8Q tySequence__cTyVHeHOWk5jStsToosJ8Q;
typedef struct tySequence__cTyVHeHOWk5jStsToosJ8Q_Content tySequence__cTyVHeHOWk5jStsToosJ8Q_Content;
typedef struct tyObject_Time__JgJH6jx9a1sQSuMyj9cRAtvg tyObject_Time__JgJH6jx9a1sQSuMyj9cRAtvg;
typedef struct tyObject_StackTraceEntry__PH5g2qROCBvTfywgopkw3Q tyObject_StackTraceEntry__PH5g2qROCBvTfywgopkw3Q;
struct NimStrPayload {
	NI cap;
	NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
	NI len;
	NimStrPayload* p;
};
typedef NU8 tySet_tyChar__nmiMWKVIe46vacnhAFrQvw[32];
struct tyTuple__7q7q3E6Oj24ZNVJb9aonhAg {
	NimStringV2 Field0;
	NimStringV2 Field1;
	NimStringV2 Field2;
};
struct tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg {
	NI bytes;
	NI16* data;
};
typedef N_STDCALL_PTR(NI32, tyProc__G0MNqLrkAnRVz4cDlgVcRg)(NI handle_p0, NI16* buf_p1, NI32 size_p2);
typedef NI16 tyUncheckedArray__Tyd4y3haUOOHTj71TPIRag[1];
typedef N_STDCALL_PTR(NI32, tyProc__Rzv0SS9bu3vYSxhvPQEKMBQ)(NI16* lpFileName_p0, NI32 nBufferLength_p1, NI16* lpBuffer_p2, NI16** lpFilePart_p3);
struct tyObject_FILETIME__rNzjJobzauTDJOCVYUQq4g {
	NI32 dwLowDateTime;
	NI32 dwHighDateTime;
};
typedef NI16 tyArray__EKfNt9b8uxndgFbu2Ky3XAQ[260];
typedef NI16 tyArray__Get9cpRTS5VjGKP6CDsI9bYA[14];
struct tyObject_WIN32_FIND_DATA__Smod69cgtGov9bh3eUxylCGw {
	NI32 dwFileAttributes;
	tyObject_FILETIME__rNzjJobzauTDJOCVYUQq4g ftCreationTime;
	tyObject_FILETIME__rNzjJobzauTDJOCVYUQq4g ftLastAccessTime;
	tyObject_FILETIME__rNzjJobzauTDJOCVYUQq4g ftLastWriteTime;
	NI32 nFileSizeHigh;
	NI32 nFileSizeLow;
	NI32 dwReserved0;
	NI32 dwReserved1;
	tyArray__EKfNt9b8uxndgFbu2Ky3XAQ cFileName;
	tyArray__Get9cpRTS5VjGKP6CDsI9bYA cAlternateFileName;
};
typedef N_STDCALL_PTR(NI32, tyProc__Q9cgmtW8b3ZIk5SwVXSQW9aQ)(NI hFindFile_p0, tyObject_WIN32_FIND_DATA__Smod69cgtGov9bh3eUxylCGw* lpFindFileData_p1);
typedef N_STDCALL_PTR(NI32, tyProc__9bXer9a4ps9aSGctILcxWReVw)(void);
typedef N_STDCALL_PTR(void, tyProc__ofoySXaAAlxxs9bQS9a1etlg)(NI hFindFile_p0);
struct TNimTypeV2 {
	void* destructor;
	NI size;
	NI16 align;
	NI16 depth;
	NU32* display;
	void* traceImpl;
	void* typeInfoV1;
	NI flags;
	void* vTable[SEQ_DECL_SIZE];
};
struct RootObj {
	TNimTypeV2* m_type;
};
struct tySequence__cTyVHeHOWk5jStsToosJ8Q {
	NI len;
	tySequence__cTyVHeHOWk5jStsToosJ8Q_Content* p;
};
struct Exception {
	RootObj Sup;
	Exception* parent;
	NCSTRING name;
	NimStringV2 message;
	tySequence__cTyVHeHOWk5jStsToosJ8Q trace;
	Exception* up;
};
struct tyObject_CatchableError__hIs6uf9agIVTefxxTl0On8A {
	Exception Sup;
};
struct tyObject_OSError__Rw9ambrEYSqg7o77XNSnlyw {
	tyObject_CatchableError__hIs6uf9agIVTefxxTl0On8A Sup;
	NI32 errorCode;
};
typedef NimStringV2 tyArray__24KAM9afIUgUaqBaEBB6r9bg[3];
struct tyObject_Time__JgJH6jx9a1sQSuMyj9cRAtvg {
	NI64 seconds;
	NI nanosecond;
};
struct tyObject_StackTraceEntry__PH5g2qROCBvTfywgopkw3Q {
	NCSTRING procname;
	NI line;
	NCSTRING filename;
};
struct tySequence__cTyVHeHOWk5jStsToosJ8Q_Content {
	NI cap;
	tyObject_StackTraceEntry__PH5g2qROCBvTfywgopkw3Q data[SEQ_DECL_SIZE];
};
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nospquoteShellWindows)(NimStringV2 s_p0);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, contains__pureZstrutils_u1830)(NimStringV2 s_p0, tySet_tyChar__nmiMWKVIe46vacnhAFrQvw chars_p1);
static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1);
static N_INLINE(void, copyMem__system_u1724)(void* dest_p0, void* source_p1, NI size_p2);
static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2);
N_LIB_PRIVATE N_NIMCALL(void, prepareAdd)(NimStringV2* s_p0, NI addLen_p1);
static N_INLINE(void, nimAddCharV1)(NimStringV2* s_p0, NIM_CHAR c_p1);
N_LIB_PRIVATE N_NIMCALL(void, setLengthStrV2)(NimStringV2* s_p0, NI newLen_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___system_u2624)(NimStringV2 dest_p0);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nospquoteShell)(NimStringV2 s_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___system_u2627)(NimStringV2* dest_p0, NimStringV2 src_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nosgetHomeDir)(void);
static N_INLINE(NimStringV2, slash___stdZprivateZospaths2_u90)(NimStringV2 head_p0, NimStringV2 tail_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nosjoinPath)(NimStringV2 head_p0, NimStringV2 tail_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, substr__system_u8420)(NimStringV2 s_p0, NI first_p1);
static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1);
static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2);
N_LIB_PRIVATE N_NIMCALL(void, nossplitFile)(NimStringV2 path_p0, tyTuple__7q7q3E6Oj24ZNVJb9aonhAg* Result);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nosgetAppFilename)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg, newWideCString__stdZwidestrs_u278)(NI size_p0);
static N_INLINE(NI16*, toWideCString__stdZwidestrs_u49)(tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg x_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___system_u2633)(NimStringV2* dest_p0, NimStringV2 src_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___stdZwidestrs_u35)(tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg* a_p0, tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg b_p1);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___stdZwidestrs_u7)(tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg a_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___stdZwidestrs_u397)(tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg s_p0, NI estimate_p1, NI replacement_p2);
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___system_u2621)(NimStringV2* dest_p0);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___stdZprivateZosdirs_u88)(tyTuple__7q7q3E6Oj24ZNVJb9aonhAg* dest_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg, newWideCString__stdZwidestrs_u325)(NimStringV2 s_p0);
N_LIB_PRIVATE N_NOINLINE(void, raiseOSError__stdZoserrors_u123)(NI32 errorCode_p0, NimStringV2 additionalInfo_p1);
N_LIB_PRIVATE N_NIMCALL(NI32, osLastError__stdZoserrors_u126)(void);
N_LIB_PRIVATE N_NIMCALL(NI, findFirstFile__stdZprivateZoscommon_u27)(NimStringV2 a_p0, tyObject_WIN32_FIND_DATA__Smod69cgtGov9bh3eUxylCGw* b_p1);
N_LIB_PRIVATE N_NIMCALL(NI, searchExtPos__stdZprivateZospaths2_u287)(NimStringV2 path_p0);
static N_INLINE(NIM_BOOL, skipFindData__stdZprivateZoscommon_u36)(tyObject_WIN32_FIND_DATA__Smod69cgtGov9bh3eUxylCGw* f_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___stdZwidestrs_u394)(NI16* s_p0);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nosextractFilename)(NimStringV2 path_p0);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, nosfileExists)(NimStringV2 filename_p0);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, nosdirExists)(NimStringV2 dir_p0);
N_LIB_PRIVATE N_NIMCALL(void*, nimNewObj)(NI size_p0, NI alignment_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, rawNewString)(NI space_p0);
N_LIB_PRIVATE N_NIMCALL(void, raiseExceptionEx)(Exception* e_p0, NCSTRING ename_p1, NCSTRING procname_p2, NCSTRING filename_p3, NI line_p4);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nosaddFileExt)(NimStringV2 filename_p0, NimStringV2 ext_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, getEnv__stdZenvvars_u36)(NimStringV2 key_p0, NimStringV2 default_p1);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, substr__system_u8407)(NimStringV2 s_p0, NI first_p1, NI last_p2);
static N_INLINE(NIM_CHAR, X5BX5D___system_u7822)(NimStringV2 s_p0, NI i_p1);
N_LIB_PRIVATE N_NIMCALL(int, exitStatusLikeShell__pureZos_u181)(int status_p0);
static N_INLINE(NCSTRING, nimToCStringConv)(NimStringV2 s_p0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Time__JgJH6jx9a1sQSuMyj9cRAtvg, fromWinTime__pureZtimes_u1249)(NI64 win_p0);
N_LIB_PRIVATE N_NIMCALL(NI64, rdFileTime__windowsZwinlean_u284)(tyObject_FILETIME__rNzjJobzauTDJOCVYUQq4g f_p0);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, ntLtTime)(tyObject_Time__JgJH6jx9a1sQSuMyj9cRAtvg a_p0, tyObject_Time__JgJH6jx9a1sQSuMyj9cRAtvg b_p1);
N_LIB_PRIVATE N_NIMCALL(tyObject_Time__JgJH6jx9a1sQSuMyj9cRAtvg, nosgetLastModificationTime)(NimStringV2 file_p0);
static NIM_CONST tySet_tyChar__nmiMWKVIe46vacnhAFrQvw TM__yu6cxgKBBXbNsTkT9cyMd4g_2 = {
0x00, 0x02, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00
, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};
static const struct {
	NI cap;
	NIM_CHAR data[1];
} TM__yu6cxgKBBXbNsTkT9cyMd4g_3 = {(0 | NIM_STRLIT_FLAG), ""};
static const NimStringV2 TM__yu6cxgKBBXbNsTkT9cyMd4g_4 = {0, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_3))};
static const NimStringV2 TM__yu6cxgKBBXbNsTkT9cyMd4g_5 = {0, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_3))};
static const struct {
	NI cap;
	NIM_CHAR data[2];
} TM__yu6cxgKBBXbNsTkT9cyMd4g_6 = {(1 | NIM_STRLIT_FLAG), "\""};
static const NimStringV2 TM__yu6cxgKBBXbNsTkT9cyMd4g_7 = {1, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_6))};
static const struct {
	NI cap;
	NIM_CHAR data[3];
} TM__yu6cxgKBBXbNsTkT9cyMd4g_8 = {(2 | NIM_STRLIT_FLAG), "\\\""};
static const NimStringV2 TM__yu6cxgKBBXbNsTkT9cyMd4g_9 = {2, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_8))};
static const NimStringV2 TM__yu6cxgKBBXbNsTkT9cyMd4g_10 = {1, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_6))};
static const NimStringV2 TM__yu6cxgKBBXbNsTkT9cyMd4g_11 = {0, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_3))};
static const struct {
	NI cap;
	NIM_CHAR data[2];
} TM__yu6cxgKBBXbNsTkT9cyMd4g_12 = {(1 | NIM_STRLIT_FLAG), " "};
static const NimStringV2 TM__yu6cxgKBBXbNsTkT9cyMd4g_13 = {1, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_12))};
static const NimStringV2 TM__yu6cxgKBBXbNsTkT9cyMd4g_14 = {0, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_3))};
static const NimStringV2 TM__yu6cxgKBBXbNsTkT9cyMd4g_15 = {0, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_3))};
static const NimStringV2 TM__yu6cxgKBBXbNsTkT9cyMd4g_16 = {0, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_3))};
extern TNimTypeV2 NTIv2__Rw9ambrEYSqg7o77XNSnlyw_;
static const struct {
	NI cap;
	NIM_CHAR data[7];
} TM__yu6cxgKBBXbNsTkT9cyMd4g_17 = {(6 | NIM_STRLIT_FLAG), "file \'"};
static const NimStringV2 TM__yu6cxgKBBXbNsTkT9cyMd4g_18 = {6, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_17))};
static const struct {
	NI cap;
	NIM_CHAR data[17];
} TM__yu6cxgKBBXbNsTkT9cyMd4g_19 = {(16 | NIM_STRLIT_FLAG), "\' does not exist"};
static const NimStringV2 TM__yu6cxgKBBXbNsTkT9cyMd4g_20 = {16, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_19))};
static const struct {
	NI cap;
	NIM_CHAR data[5];
} TM__yu6cxgKBBXbNsTkT9cyMd4g_21 = {(4 | NIM_STRLIT_FLAG), "PATH"};
static const NimStringV2 TM__yu6cxgKBBXbNsTkT9cyMd4g_22 = {4, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_21))};
static const NimStringV2 TM__yu6cxgKBBXbNsTkT9cyMd4g_23 = {0, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_3))};
static const NimStringV2 TM__yu6cxgKBBXbNsTkT9cyMd4g_24 = {0, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_3))};
static const struct {
	NI cap;
	NIM_CHAR data[4];
} TM__yu6cxgKBBXbNsTkT9cyMd4g_25 = {(3 | NIM_STRLIT_FLAG), "exe"};
static const struct {
	NI cap;
	NIM_CHAR data[4];
} TM__yu6cxgKBBXbNsTkT9cyMd4g_26 = {(3 | NIM_STRLIT_FLAG), "cmd"};
static const struct {
	NI cap;
	NIM_CHAR data[4];
} TM__yu6cxgKBBXbNsTkT9cyMd4g_27 = {(3 | NIM_STRLIT_FLAG), "bat"};
N_LIB_PRIVATE NIM_CONST tyArray__24KAM9afIUgUaqBaEBB6r9bg ExeExts__pureZos_u70 = {{3, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_25))}, {3, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_26))}, {3, ((NimStrPayload*) (&TM__yu6cxgKBBXbNsTkT9cyMd4g_27))}};
extern NIM_BOOL nimInErrorMode__system_u4211;
extern tyProc__G0MNqLrkAnRVz4cDlgVcRg Dl_1442840773_;
extern tyProc__Rzv0SS9bu3vYSxhvPQEKMBQ Dl_1442840835_;
extern tyProc__Q9cgmtW8b3ZIk5SwVXSQW9aQ Dl_1442840830_;
extern tyProc__9bXer9a4ps9aSGctILcxWReVw Dl_1442840747_;
extern tyProc__ofoySXaAAlxxs9bQS9a1etlg Dl_1442840833_;
static N_INLINE(void, nimCopyMem)(void* dest_p0, void* source_p1, NI size_p2) {
	void* T1_;
T1_ = ((void*) 0);
T1_ = memcpy(dest_p0, source_p1, ((size_t) (size_p2)));
}

static N_INLINE(void, copyMem__system_u1724)(void* dest_p0, void* source_p1, NI size_p2) {
	nimCopyMem(dest_p0, source_p1, size_p2);
}

static N_INLINE(void, appendString)(NimStringV2* dest_p0, NimStringV2 src_p1) {
	{
	if ((!((((NI) 0) < src_p1.len)))) {
	goto LA3_;
}
copyMem__system_u1724(((void*) (((&(*(*dest_p0).p).data[(*dest_p0).len])))), ((void*) (((&(*src_p1.p).data[((NI) 0)])))), (src_p1.len));
(*dest_p0).len += src_p1.len;
(*(*dest_p0).p).data[(*dest_p0).len] = 0;
}
LA3_: ;
}

static N_INLINE(void, nimAddCharV1)(NimStringV2* s_p0, NIM_CHAR c_p1) {
	prepareAdd(s_p0, ((NI) 1));
(*(*s_p0).p).data[(*s_p0).len] = c_p1;
(*s_p0).len += ((NI) 1);
(*(*s_p0).p).data[(*s_p0).len] = 0;
}

static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
result = ((&nimInErrorMode__system_u4211));
	return result;
}

N_LIB_PRIVATE N_NIMCALL(NimStringV2, nospquoteShellWindows)(NimStringV2 s_p0) {
	NimStringV2 result;
NimStringV2 backslashBuff_1;
NIM_BOOL needQuote_1;
NIM_BOOL T1_;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result.len = 0;
result.p = NIM_NIL;
backslashBuff_1.len = 0;
backslashBuff_1.p = NIM_NIL;
T1_ = ((NIM_BOOL) 0);
T1_ = contains__pureZstrutils_u1830(s_p0, TM__yu6cxgKBBXbNsTkT9cyMd4g_2);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
if (T1_) {
	goto LA2_;
}
T1_ = (s_p0.len == ((NI) 0));
LA2_: ;
needQuote_1 = T1_;
result = TM__yu6cxgKBBXbNsTkT9cyMd4g_4;
backslashBuff_1 = TM__yu6cxgKBBXbNsTkT9cyMd4g_5;
{
	if ((!(needQuote_1))) {
	goto LA5_;
}
prepareAdd(((&result)), 1);
appendString(((&result)), TM__yu6cxgKBBXbNsTkT9cyMd4g_7);
}
LA5_: ;
{
	NIM_CHAR c_1;
NI i_1;
NI L_1;
c_1 = ((NIM_CHAR) 0);
i_1 = ((NI) 0);
L_1 = s_p0.len;
{
	while (1) {
	if ((!((i_1 < L_1)))) {
	goto LA9;
}
c_1 = (s_p0).p->data[i_1];
{
	if ((!((((NU8) c_1) == ((NU8) 92))))) {
	goto LA12_;
}
nimAddCharV1(((&backslashBuff_1)), c_1);
}
goto LA10_;
LA12_: ;
{
	if ((!((((NU8) c_1) == ((NU8) 34))))) {
	goto LA15_;
}
{
	NI i_2;
NI colontmp_;
NI i_3;
i_2 = ((NI) 0);
colontmp_ = ((NI) 0);
colontmp_ = ((NI) (backslashBuff_1.len * ((NI) 2)));
i_3 = ((NI) 0);
{
	while (1) {
	if ((!((i_3 < colontmp_)))) {
	goto LA19;
}
i_2 = i_3;
nimAddCharV1(((&result)), 92);
i_3 += ((NI) 1);
}
LA19: ;
}
}
setLengthStrV2(((&backslashBuff_1)), ((NI) 0));
prepareAdd(((&result)), 2);
appendString(((&result)), TM__yu6cxgKBBXbNsTkT9cyMd4g_9);
}
goto LA10_;
LA15_: ;
{
	{
	if ((!((!((backslashBuff_1.len == ((NI) 0))))))) {
	goto LA23_;
}
prepareAdd(((&result)), (0 + backslashBuff_1.len));
appendString(((&result)), backslashBuff_1);
setLengthStrV2(((&backslashBuff_1)), ((NI) 0));
}
LA23_: ;
nimAddCharV1(((&result)), c_1);
}
LA10_: ;
i_1 += ((NI) 1);
}
LA9: ;
}
}
{
	if ((!((((NI) 0) < backslashBuff_1.len)))) {
	goto LA27_;
}
prepareAdd(((&result)), (0 + backslashBuff_1.len));
appendString(((&result)), backslashBuff_1);
}
LA27_: ;
{
	if ((!(needQuote_1))) {
	goto LA31_;
}
prepareAdd(((&result)), (0 + backslashBuff_1.len));
appendString(((&result)), backslashBuff_1);
prepareAdd(((&result)), 1);
appendString(((&result)), TM__yu6cxgKBBXbNsTkT9cyMd4g_10);
}
LA31_: ;
eqdestroy___system_u2624(backslashBuff_1);
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(NimStringV2, nospquoteShell)(NimStringV2 s_p0) {
	NimStringV2 result;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result.len = 0;
result.p = NIM_NIL;
result = nospquoteShellWindows(s_p0);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(NimStringV2, quoteShellCommand__pureZos_u57)(NimStringV2* args_p0, NI args_p0Len_0) {
	NimStringV2 result;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result = TM__yu6cxgKBBXbNsTkT9cyMd4g_11;
{
	NI i_1;
NI colontmp_;
NI i_2;
i_1 = ((NI) 0);
colontmp_ = ((NI) 0);
colontmp_ = args_p0Len_0;
i_2 = ((NI) 0);
{
	while (1) {
	NimStringV2 colontmpD_;
if ((!((i_2 < colontmp_)))) {
	goto LA3;
}
colontmpD_.len = 0;
colontmpD_.p = NIM_NIL;
i_1 = i_2;
{
	if ((!((((NI) 0) < i_1)))) {
	goto LA6_;
}
prepareAdd(((&result)), 1);
appendString(((&result)), TM__yu6cxgKBBXbNsTkT9cyMd4g_13);
}
LA6_: ;
colontmpD_ = nospquoteShell(args_p0[i_1]);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
prepareAdd(((&result)), (0 + colontmpD_.len));
appendString(((&result)), colontmpD_);
i_2 += ((NI) 1);
eqdestroy___system_u2624(colontmpD_);
}
LA3: ;
}
}
}
	BeforeRet_: ;
		return result;
}

static N_INLINE(NimStringV2, slash___stdZprivateZospaths2_u90)(NimStringV2 head_p0, NimStringV2 tail_p1) {
	NimStringV2 result;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result.len = 0;
result.p = NIM_NIL;
result = nosjoinPath(head_p0, tail_p1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(NimStringV2, expandTilde__pureZos_u32)(NimStringV2 path_p0) {
	NimStringV2 result;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result.len = 0;
result.p = NIM_NIL;
{
	NIM_BOOL T3_;
T3_ = ((NIM_BOOL) 0);
T3_ = (path_p0.len == ((NI) 0));
if (T3_) {
	goto LA4_;
}
T3_ = (!((((NU8) (path_p0).p->data[((NI) 0)]) == ((NU8) 126))));
LA4_: ;
if ((!(T3_))) {
	goto LA5_;
}
eqcopy___system_u2627(((&result)), path_p0);
}
goto LA1_;
LA5_: ;
{
	if ((!((path_p0.len == ((NI) 1))))) {
	goto LA8_;
}
result = nosgetHomeDir();
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
goto LA1_;
LA8_: ;
{
	NimStringV2 colontmpD_;
NimStringV2 colontmpD__2;
if ((!(((((NU8) (path_p0).p->data[((NI) 1)]) == ((NU8) 92)) || (((NU8) (path_p0).p->data[((NI) 1)]) == ((NU8) 47)))))) {
	goto LA11_;
}
colontmpD_.len = 0;
colontmpD_.p = NIM_NIL;
colontmpD__2.len = 0;
colontmpD__2.p = NIM_NIL;
colontmpD_ = nosgetHomeDir();
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
colontmpD__2 = substr__system_u8420(path_p0, ((NI) 2));
result = slash___stdZprivateZospaths2_u90(colontmpD_, colontmpD__2);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
eqdestroy___system_u2624(colontmpD__2);
eqdestroy___system_u2624(colontmpD_);
}
goto LA1_;
LA11_: ;
{
	eqcopy___system_u2627(((&result)), path_p0);
}
LA1_: ;
}
	BeforeRet_: ;
		return result;
}

static N_INLINE(void, nimSetMem__systemZmemory_u7)(void* a_p0, int v_p1, NI size_p2) {
	void* T1_;
T1_ = ((void*) 0);
T1_ = memset(a_p0, v_p1, ((size_t) (size_p2)));
}

static N_INLINE(void, nimZeroMem)(void* p_p0, NI size_p1) {
	NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
nimSetMem__systemZmemory_u7(p_p0, ((int) 0), size_p1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
	BeforeRet_: ;
}

static N_INLINE(NI16*, toWideCString__stdZwidestrs_u49)(tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg x_p0) {
	NI16* result;
result = x_p0.data;
	return result;
}

N_LIB_PRIVATE N_NIMCALL(NimStringV2, nosgetAppFilename)(void) {
	NimStringV2 result;
tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg buf_1;
NI32 bufsize_1;
NIM_BOOL oldNimErrFin1_;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result.len = 0;
result.p = NIM_NIL;
nimZeroMem(((void*) ((&buf_1))), sizeof(tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg));
bufsize_1 = ((NI32) 260);
buf_1 = newWideCString__stdZwidestrs_u278(((NI) (bufsize_1)));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
{
	while (1) {
	NI32 L_1;
NI16* T4_;
T4_ = ((NI16*) 0);
T4_ = toWideCString__stdZwidestrs_u49(buf_1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
L_1 = Dl_1442840773_(((NI) 0), T4_, bufsize_1);
{
	if ((!((L_1 == ((NI32) 0))))) {
	goto LA7_;
}
eqsink___system_u2633(((&result)), TM__yu6cxgKBBXbNsTkT9cyMd4g_14);
goto LA2;
}
goto LA5_;
LA7_: ;
{
	tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg T12_;
if ((!((bufsize_1 < L_1)))) {
	goto LA10_;
}
T12_ = newWideCString__stdZwidestrs_u278(((NI) (L_1)));
if (NIM_UNLIKELY((*nimErr_))) {
	eqdestroy___stdZwidestrs_u7(T12_);
	goto LA1_;
}
eqsink___stdZwidestrs_u35(((&buf_1)), T12_);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
bufsize_1 = L_1;
}
goto LA5_;
LA10_: ;
{
	NimStringV2 T14_;
T14_.len = 0;
T14_.p = NIM_NIL;
T14_ = dollar___stdZwidestrs_u397(buf_1, ((NI) (L_1)), ((NI) 65533));
if (NIM_UNLIKELY((*nimErr_))) {
	eqdestroy___system_u2624(T14_);
	goto LA1_;
}
eqsink___system_u2633(((&result)), T14_);
goto LA2;
}
LA5_: ;
}
}
LA2: ;
{
	LA1_: ;
}
{
	oldNimErrFin1_ = (*nimErr_);
(*nimErr_) = NIM_FALSE;
eqdestroy___stdZwidestrs_u7(buf_1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
(*nimErr_) = oldNimErrFin1_;
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(NimStringV2, nosgetAppDir)(void) {
	NimStringV2 result;
tyTuple__7q7q3E6Oj24ZNVJb9aonhAg colontmpD_;
NimStringV2 colontmpD__2;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result.len = 0;
result.p = NIM_NIL;
nimZeroMem(((void*) ((&colontmpD_))), sizeof(tyTuple__7q7q3E6Oj24ZNVJb9aonhAg));
colontmpD__2.len = 0;
colontmpD__2.p = NIM_NIL;
colontmpD__2 = nosgetAppFilename();
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
nossplitFile(colontmpD__2, ((&colontmpD_)));
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
result = colontmpD_.Field0;
eqwasMoved___system_u2621(((&colontmpD_.Field0)));
eqdestroy___system_u2624(colontmpD__2);
eqdestroy___stdZprivateZosdirs_u88(((&colontmpD_)));
}
	BeforeRet_: ;
		return result;
}

static N_INLINE(NIM_BOOL, skipFindData__stdZprivateZoscommon_u36)(tyObject_WIN32_FIND_DATA__Smod69cgtGov9bh3eUxylCGw* f_p0) {
	NIM_BOOL result;
NIM_BOOL T1_;
NIM_BOOL T3_;
NIM_BOOL T5_;
T1_ = ((NIM_BOOL) 0);
T1_ = (((NI) ((*f_p0).cFileName[(((NI) 0) - 0)])) == ((NI) 46));
if ((!(T1_))) {
	goto LA2_;
}
T3_ = ((NIM_BOOL) 0);
T3_ = (((NI) ((*f_p0).cFileName[(((NI) 1) - 0)])) == ((NI) 0));
if (T3_) {
	goto LA4_;
}
T5_ = ((NIM_BOOL) 0);
T5_ = (((NI) ((*f_p0).cFileName[(((NI) 1) - 0)])) == ((NI) 46));
if ((!(T5_))) {
	goto LA6_;
}
T5_ = (((NI) ((*f_p0).cFileName[(((NI) 2) - 0)])) == ((NI) 0));
LA6_: ;
T3_ = T5_;
LA4_: ;
T1_ = T3_;
LA2_: ;
result = T1_;
	return result;
}

N_LIB_PRIVATE N_NIMCALL(NimStringV2, nosexpandFilename)(NimStringV2 filename_p0) {
	NimStringV2 result;
tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg res_1;
NI32 bufsize_1;
NI16* unused_1;
NIM_BOOL oldNimErrFin4_;
NIM_BOOL oldNimErrFin1_;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result.len = 0;
result.p = NIM_NIL;
nimZeroMem(((void*) ((&res_1))), sizeof(tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg));
result = TM__yu6cxgKBBXbNsTkT9cyMd4g_15;
bufsize_1 = ((NI32) 260);
unused_1 = ((NI16*) NIM_NIL);
res_1 = newWideCString__stdZwidestrs_u278(((NI) (bufsize_1)));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
{
	while (1) {
	tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg colontmpD_;
NI32 L_1;
NI16* T5_;
NI16* T6_;
nimZeroMem(((void*) ((&colontmpD_))), sizeof(tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg));
colontmpD_ = newWideCString__stdZwidestrs_u325(filename_p0);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA4_;
}
T5_ = ((NI16*) 0);
T5_ = toWideCString__stdZwidestrs_u49(colontmpD_);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA4_;
}
T6_ = ((NI16*) 0);
T6_ = toWideCString__stdZwidestrs_u49(res_1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA4_;
}
L_1 = Dl_1442840835_(T5_, bufsize_1, T6_, (&unused_1));
{
	NI32 T11_;
if ((!((L_1 == ((NI32) 0))))) {
	goto LA9_;
}
T11_ = ((NI32) 0);
T11_ = osLastError__stdZoserrors_u126();
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA4_;
}
raiseOSError__stdZoserrors_u123(T11_, filename_p0);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA4_;
}
}
goto LA7_;
LA9_: ;
{
	tyObject_WideCStringObj__Y4mbfz4JpRWlVii9b3ufnsg T15_;
if ((!((bufsize_1 < L_1)))) {
	goto LA13_;
}
T15_ = newWideCString__stdZwidestrs_u278(((NI) (L_1)));
if (NIM_UNLIKELY((*nimErr_))) {
	eqdestroy___stdZwidestrs_u7(T15_);
	goto LA4_;
}
eqsink___stdZwidestrs_u35(((&res_1)), T15_);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA4_;
}
bufsize_1 = L_1;
}
goto LA7_;
LA13_: ;
{
	NimStringV2 T17_;
T17_.len = 0;
T17_.p = NIM_NIL;
T17_ = dollar___stdZwidestrs_u397(res_1, ((NI) (L_1)), ((NI) 65533));
if (NIM_UNLIKELY((*nimErr_))) {
	eqdestroy___system_u2624(T17_);
	goto LA4_;
}
eqsink___system_u2633(((&result)), T17_);
eqdestroy___stdZwidestrs_u7(colontmpD_);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
goto LA2;
}
LA7_: ;
{
	LA4_: ;
}
{
	oldNimErrFin4_ = (*nimErr_);
(*nimErr_) = NIM_FALSE;
eqdestroy___stdZwidestrs_u7(colontmpD_);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
(*nimErr_) = oldNimErrFin4_;
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
}
}
LA2: ;
{
	NimStringV2 x_1;
tyObject_WIN32_FIND_DATA__Smod69cgtGov9bh3eUxylCGw fX60gensym10__1;
NI resX60gensym10__1;
x_1.len = 0;
x_1.p = NIM_NIL;
nimZeroMem(((void*) ((&fX60gensym10__1))), sizeof(tyObject_WIN32_FIND_DATA__Smod69cgtGov9bh3eUxylCGw));
resX60gensym10__1 = ((NI) 0);
resX60gensym10__1 = findFirstFile__stdZprivateZoscommon_u27(result, ((&fX60gensym10__1)));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA21_;
}
{
	NI dotPosX60gensym10__1;
if ((!((!((resX60gensym10__1 == ((NI) -1))))))) {
	goto LA24_;
}
dotPosX60gensym10__1 = searchExtPos__stdZprivateZospaths2_u287(result);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA26_;
}
{
	while (1) {
	{
	NIM_BOOL T31_;
NIM_BOOL T32_;
NimStringV2 ffX60gensym10__1;
NI idxX60gensym10__1;
T31_ = ((NIM_BOOL) 0);
T32_ = ((NIM_BOOL) 0);
T32_ = skipFindData__stdZprivateZoscommon_u36(((&fX60gensym10__1)));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA26_;
}
T31_ = (!(T32_));
if ((!(T31_))) {
	goto LA33_;
}
T31_ = (!((!((((NI32) (fX60gensym10__1.dwFileAttributes & ((NI32) 16))) == ((NI32) 0))))));
LA33_: ;
if ((!(T31_))) {
	goto LA34_;
}
ffX60gensym10__1.len = 0;
ffX60gensym10__1.p = NIM_NIL;
ffX60gensym10__1 = dollar___stdZwidestrs_u394(((NI16*) (((&fX60gensym10__1.cFileName[(((NI) 0) - 0)])))));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA26_;
}
idxX60gensym10__1 = ((NI) (((NI) (ffX60gensym10__1.len - result.len)) + dotPosX60gensym10__1));
{
	NIM_BOOL T38_;
NIM_BOOL T39_;
NIM_BOOL T40_;
NIM_BOOL T43_;
NIM_BOOL T46_;
NIM_BOOL T47_;
tyTuple__7q7q3E6Oj24ZNVJb9aonhAg colontmpD__2;
NimStringV2 colontmpD__3;
NimStringV2 T52_;
T38_ = ((NIM_BOOL) 0);
T39_ = ((NIM_BOOL) 0);
T40_ = ((NIM_BOOL) 0);
T40_ = (dotPosX60gensym10__1 < ((NI) 0));
if (T40_) {
	goto LA41_;
}
T40_ = (ffX60gensym10__1.len <= idxX60gensym10__1);
LA41_: ;
T39_ = T40_;
if (T39_) {
	goto LA42_;
}
T43_ = ((NIM_BOOL) 0);
T43_ = (((NI) 0) <= idxX60gensym10__1);
if ((!(T43_))) {
	goto LA44_;
}
T43_ = (((NU8) (ffX60gensym10__1).p->data[idxX60gensym10__1]) == ((NU8) 46));
LA44_: ;
T39_ = T43_;
LA42_: ;
T38_ = T39_;
if (T38_) {
	goto LA45_;
}
T46_ = ((NIM_BOOL) 0);
T47_ = ((NIM_BOOL) 0);
T47_ = (((NI) 0) <= dotPosX60gensym10__1);
if ((!(T47_))) {
	goto LA48_;
}
T47_ = (((NI) (dotPosX60gensym10__1 + ((NI) 1))) < result.len);
LA48_: ;
T46_ = T47_;
if ((!(T46_))) {
	goto LA49_;
}
T46_ = (((NU8) (result).p->data[((NI) (dotPosX60gensym10__1 + ((NI) 1)))]) == ((NU8) 42));
LA49_: ;
T38_ = T46_;
LA45_: ;
if ((!(T38_))) {
	goto LA50_;
}
nimZeroMem(((void*) ((&colontmpD__2))), sizeof(tyTuple__7q7q3E6Oj24ZNVJb9aonhAg));
colontmpD__3.len = 0;
colontmpD__3.p = NIM_NIL;
nossplitFile(result, ((&colontmpD__2)));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA26_;
}
colontmpD__3 = nosextractFilename(ffX60gensym10__1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA26_;
}
T52_.len = 0;
T52_.p = NIM_NIL;
T52_ = slash___stdZprivateZospaths2_u90(colontmpD__2.Field0, colontmpD__3);
if (NIM_UNLIKELY((*nimErr_))) {
	eqdestroy___system_u2624(T52_);
	goto LA26_;
}
eqsink___system_u2633(((&x_1)), T52_);
eqsink___system_u2633(((&result)), x_1);
eqwasMoved___system_u2621(((&x_1)));
eqdestroy___system_u2624(colontmpD__3);
eqdestroy___stdZprivateZosdirs_u88(((&colontmpD__2)));
}
LA50_: ;
eqdestroy___system_u2624(ffX60gensym10__1);
}
LA34_: ;
{
	NI32 T55_;
NI32 errCodeX60gensym10__1;
T55_ = ((NI32) 0);
T55_ = Dl_1442840830_(resX60gensym10__1, ((&fX60gensym10__1)));
if ((!((T55_ == ((NI32) 0))))) {
	goto LA56_;
}
errCodeX60gensym10__1 = Dl_1442840747_();
{
	if ((!((errCodeX60gensym10__1 == ((NI32) 18))))) {
	goto LA60_;
}
goto LA27;
}
goto LA58_;
LA60_: ;
{
	raiseOSError__stdZoserrors_u123(errCodeX60gensym10__1, TM__yu6cxgKBBXbNsTkT9cyMd4g_16);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA26_;
}
}
LA58_: ;
}
LA56_: ;
}
}
LA27: ;
{
	LA26_: ;
}
{
	Dl_1442840833_(resX60gensym10__1);
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA21_;
}
}
LA24_: ;
{
	LA21_: ;
}
{
	eqdestroy___system_u2624(x_1);
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
}
{
	NIM_BOOL T69_;
NIM_BOOL T70_;
NIM_BOOL T72_;
tyObject_OSError__Rw9ambrEYSqg7o77XNSnlyw* T75_;
NimStringV2 T76_;
T69_ = ((NIM_BOOL) 0);
T70_ = ((NIM_BOOL) 0);
T70_ = nosfileExists(result);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
T69_ = (!(T70_));
if ((!(T69_))) {
	goto LA71_;
}
T72_ = ((NIM_BOOL) 0);
T72_ = nosdirExists(result);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
T69_ = (!(T72_));
LA71_: ;
if ((!(T69_))) {
	goto LA73_;
}
T75_ = NIM_NIL;
T75_ = ((tyObject_OSError__Rw9ambrEYSqg7o77XNSnlyw*) nimNewObj(sizeof(tyObject_OSError__Rw9ambrEYSqg7o77XNSnlyw), NIM_ALIGNOF(tyObject_OSError__Rw9ambrEYSqg7o77XNSnlyw)));
(*T75_).Sup.Sup.Sup.m_type = (&NTIv2__Rw9ambrEYSqg7o77XNSnlyw_);
(*T75_).Sup.Sup.name = "OSError";
T76_.len = 0;
T76_.p = NIM_NIL;
T76_ = rawNewString((22 + result.len));
appendString(((&T76_)), TM__yu6cxgKBBXbNsTkT9cyMd4g_18);
appendString(((&T76_)), result);
appendString(((&T76_)), TM__yu6cxgKBBXbNsTkT9cyMd4g_20);
(*T75_).Sup.Sup.message = T76_;
(*T75_).Sup.Sup.parent = ((Exception*) NIM_NIL);
raiseExceptionEx(((Exception*) T75_), "OSError", "expandFilename", "os.nim", 415);
goto LA1_;
}
LA73_: ;
{
	LA1_: ;
}
{
	oldNimErrFin1_ = (*nimErr_);
(*nimErr_) = NIM_FALSE;
eqdestroy___stdZwidestrs_u7(res_1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
(*nimErr_) = oldNimErrFin1_;
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
	BeforeRet_: ;
		return result;
}

static N_INLINE(NIM_CHAR, X5BX5D___system_u7822)(NimStringV2 s_p0, NI i_p1) {
	NIM_CHAR result;
result = (s_p0).p->data[((NI) (s_p0.len - i_p1))];
	return result;
}

N_LIB_PRIVATE N_NIMCALL(NimStringV2, findExe__pureZos_u71)(NimStringV2 exe_p0, NIM_BOOL followSymlinks_p1, NimStringV2* extensions_p2, NI extensions_p2Len_0) {
	NimStringV2 result;
NimStringV2 path_1;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result.len = 0;
result.p = NIM_NIL;
path_1.len = 0;
path_1.p = NIM_NIL;
{
	if ((!((exe_p0.len == ((NI) 0))))) {
	goto LA4_;
}
eqdestroy___system_u2624(path_1);
goto BeforeRet_;
}
LA4_: ;
{
	NimStringV2* extX60gensym8__1;
NI i_1;
extX60gensym8__1 = ((NimStringV2*) 0);
i_1 = ((NI) 0);
{
	while (1) {
	NimStringV2 T9_;
if ((!((i_1 < extensions_p2Len_0)))) {
	goto LA8;
}
extX60gensym8__1 = ((&extensions_p2[i_1]));
T9_.len = 0;
T9_.p = NIM_NIL;
T9_ = nosaddFileExt(exe_p0, (*extX60gensym8__1));
if (NIM_UNLIKELY((*nimErr_))) {
	eqdestroy___system_u2624(T9_);
	goto LA1_;
}
eqsink___system_u2633(((&result)), T9_);
{
	NIM_BOOL T12_;
T12_ = ((NIM_BOOL) 0);
T12_ = nosfileExists(result);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
if ((!(T12_))) {
	goto LA13_;
}
eqdestroy___system_u2624(path_1);
goto BeforeRet_;
}
LA13_: ;
i_1 += ((NI) 1);
}
LA8: ;
}
}
path_1 = getEnv__stdZenvvars_u36(TM__yu6cxgKBBXbNsTkT9cyMd4g_22, TM__yu6cxgKBBXbNsTkT9cyMd4g_23);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
{
	NimStringV2 candidate_1;
NI lastX60gensym34__1;
NI splitsX60gensym34__1;
candidate_1.len = 0;
candidate_1.p = NIM_NIL;
lastX60gensym34__1 = ((NI) 0);
splitsX60gensym34__1 = ((NI) -1);
{
	while (1) {
	NI firstX60gensym34__1;
NimStringV2 T27_;
if ((!((lastX60gensym34__1 <= path_1.len)))) {
	goto LA18;
}
firstX60gensym34__1 = lastX60gensym34__1;
{
	while (1) {
	NIM_BOOL T21_;
T21_ = ((NIM_BOOL) 0);
T21_ = (lastX60gensym34__1 < path_1.len);
if ((!(T21_))) {
	goto LA22_;
}
T21_ = (!((((NU8) (path_1).p->data[lastX60gensym34__1]) == ((NU8) 59))));
LA22_: ;
if ((!(T21_))) {
	goto LA20;
}
lastX60gensym34__1 += ((NI) 1);
}
LA20: ;
}
{
	if ((!((splitsX60gensym34__1 == ((NI) 0))))) {
	goto LA25_;
}
lastX60gensym34__1 = path_1.len;
}
LA25_: ;
T27_.len = 0;
T27_.p = NIM_NIL;
T27_ = substr__system_u8407(path_1, firstX60gensym34__1, ((NI) (lastX60gensym34__1 - ((NI) 1))));
eqsink___system_u2633(((&candidate_1)), T27_);
{
	NimStringV2 x_1;
NimStringV2 colontmpD_;
NimStringV2 colontmpD__2;
NimStringV2 T34_;
x_1.len = 0;
x_1.p = NIM_NIL;
colontmpD_.len = 0;
colontmpD_.p = NIM_NIL;
colontmpD__2.len = 0;
colontmpD__2.p = NIM_NIL;
{
	if ((!((candidate_1.len == ((NI) 0))))) {
	goto LA32_;
}
eqdestroy___system_u2624(colontmpD__2);
eqdestroy___system_u2624(colontmpD_);
eqdestroy___system_u2624(x_1);
goto LA28;
}
LA32_: ;
T34_.len = 0;
T34_.p = NIM_NIL;
{
	NIM_BOOL T37_;
NIM_CHAR T39_;
T37_ = ((NIM_BOOL) 0);
T37_ = (((NU8) (candidate_1).p->data[((NI) 0)]) == ((NU8) 34));
if ((!(T37_))) {
	goto LA38_;
}
T39_ = ((NIM_CHAR) 0);
T39_ = X5BX5D___system_u7822(candidate_1, ((NI) 1));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA29_;
}
T37_ = (((NU8) T39_) == ((NU8) 34));
LA38_: ;
if ((!(T37_))) {
	goto LA40_;
}
colontmpD_ = substr__system_u8407(candidate_1, ((NI) 1), ((NI) (candidate_1.len - ((NI) 2))));
T34_ = colontmpD_;
}
goto LA35_;
LA40_: ;
{
	colontmpD__2 = candidate_1;
eqwasMoved___system_u2621(((&candidate_1)));
T34_ = colontmpD__2;
}
LA35_: ;
x_1 = slash___stdZprivateZospaths2_u90(T34_, exe_p0);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA29_;
}
{
	NimStringV2* ext_1;
NI i_2;
ext_1 = ((NimStringV2*) 0);
i_2 = ((NI) 0);
{
	while (1) {
	NimStringV2 x_2;
if ((!((i_2 < extensions_p2Len_0)))) {
	goto LA45;
}
x_2.len = 0;
x_2.p = NIM_NIL;
ext_1 = ((&extensions_p2[i_2]));
x_2 = nosaddFileExt(x_1, (*ext_1));
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA46_;
}
{
	NIM_BOOL T49_;
T49_ = ((NIM_BOOL) 0);
T49_ = nosfileExists(x_2);
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA46_;
}
if ((!(T49_))) {
	goto LA50_;
}
result = x_2;
eqwasMoved___system_u2621(((&x_2)));
eqdestroy___system_u2624(x_2);
eqdestroy___system_u2624(colontmpD__2);
eqdestroy___system_u2624(colontmpD_);
eqdestroy___system_u2624(x_1);
eqdestroy___system_u2624(candidate_1);
eqdestroy___system_u2624(path_1);
goto BeforeRet_;
}
LA50_: ;
i_2 += ((NI) 1);
{
	LA46_: ;
}
{
	eqdestroy___system_u2624(x_2);
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA29_;
}
}
LA45: ;
}
}
{
	LA29_: ;
}
{
	eqdestroy___system_u2624(colontmpD__2);
eqdestroy___system_u2624(colontmpD_);
eqdestroy___system_u2624(x_1);
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA16_;
}
}
LA28: ;
{
	if ((!((splitsX60gensym34__1 == ((NI) 0))))) {
	goto LA58_;
}
goto LA17;
}
LA58_: ;
splitsX60gensym34__1 -= ((NI) 1);
lastX60gensym34__1 += ((NI) 1);
}
LA18: ;
}
LA17: ;
{
	LA16_: ;
}
{
	eqdestroy___system_u2624(candidate_1);
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto LA1_;
}
}
result = TM__yu6cxgKBBXbNsTkT9cyMd4g_24;
{
	LA1_: ;
}
{
	eqdestroy___system_u2624(path_1);
}
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(int, exitStatusLikeShell__pureZos_u181)(int status_p0) {
	int result;
result = status_p0;
	return result;
}

static N_INLINE(NCSTRING, nimToCStringConv)(NimStringV2 s_p0) {
	NCSTRING result;
{
	if ((!((s_p0.len == ((NI) 0))))) {
	goto LA3_;
}
result = "";
}
goto LA1_;
LA3_: ;
{
	result = ((NCSTRING) ((*s_p0.p).data));
}
LA1_: ;
	return result;
}

N_LIB_PRIVATE N_NIMCALL(NI, nosexecShellCmd)(NimStringV2 command_p0) {
	NI result;
int T1_;
int T2_;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result = ((NI) 0);
T1_ = ((int) 0);
T1_ = system(nimToCStringConv(command_p0));
T2_ = ((int) 0);
T2_ = exitStatusLikeShell__pureZos_u181(T1_);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
result = ((NI) (T2_));
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(tyObject_Time__JgJH6jx9a1sQSuMyj9cRAtvg, nosgetLastModificationTime)(NimStringV2 file_p0) {
	tyObject_Time__JgJH6jx9a1sQSuMyj9cRAtvg result;
tyObject_WIN32_FIND_DATA__Smod69cgtGov9bh3eUxylCGw f_1;
NI h_1;
NI64 T6_;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
nimZeroMem(((void*) ((&result))), sizeof(tyObject_Time__JgJH6jx9a1sQSuMyj9cRAtvg));
nimZeroMem(((void*) ((&f_1))), sizeof(tyObject_WIN32_FIND_DATA__Smod69cgtGov9bh3eUxylCGw));
h_1 = findFirstFile__stdZprivateZoscommon_u27(file_p0, ((&f_1)));
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
{
	NI32 T5_;
if ((!((h_1 == ((NI) -1))))) {
	goto LA3_;
}
T5_ = ((NI32) 0);
T5_ = osLastError__stdZoserrors_u126();
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
raiseOSError__stdZoserrors_u123(T5_, file_p0);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
LA3_: ;
T6_ = ((NI64) 0);
T6_ = rdFileTime__windowsZwinlean_u284(f_1.ftLastWriteTime);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
result = fromWinTime__pureZtimes_u1249(T6_);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
Dl_1442840833_(h_1);
}
	BeforeRet_: ;
		return result;
}

N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, nosfileNewer)(NimStringV2 a_p0, NimStringV2 b_p1) {
	NIM_BOOL result;
tyObject_Time__JgJH6jx9a1sQSuMyj9cRAtvg T1_;
tyObject_Time__JgJH6jx9a1sQSuMyj9cRAtvg T2_;
NIM_BOOL* nimErr_;
{
		nimErr_ = nimErrorFlag();
result = ((NIM_BOOL) 0);
T1_ = nosgetLastModificationTime(b_p1);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
T2_ = nosgetLastModificationTime(a_p0);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
result = ntLtTime(T1_, T2_);
if (NIM_UNLIKELY((*nimErr_))) {
	goto BeforeRet_;
}
}
	BeforeRet_: ;
		return result;
}

